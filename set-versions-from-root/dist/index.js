"use strict";var gn=Object.create;var ne=Object.defineProperty;var wn=Object.getOwnPropertyDescriptor;var yn=Object.getOwnPropertyNames;var vn=Object.getPrototypeOf,Sn=Object.prototype.hasOwnProperty;var bn=(i,t,e)=>t in i?ne(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var B=(i,t)=>()=>(i&&(t=i(i=0)),t);var W=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),si=(i,t)=>{for(var e in t)ne(i,e,{get:t[e],enumerable:!0})},ii=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of yn(t))!Sn.call(i,r)&&r!==e&&ne(i,r,{get:()=>t[r],enumerable:!(s=wn(t,r))||s.enumerable});return i};var ht=(i,t,e)=>(e=i!=null?gn(vn(i)):{},ii(t||!i||!i.__esModule?ne(e,"default",{value:i,enumerable:!0}):e,i)),ri=i=>ii(ne({},"__esModule",{value:!0}),i);var ni=(i,t,e)=>(bn(i,typeof t!="symbol"?t+"":t,e),e),os=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var p=(i,t,e)=>(os(i,t,"read from private field"),e?e.call(i):t.get(i)),F=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},x=(i,t,e,s)=>(os(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e);var $t=(i,t,e)=>(os(i,t,"access private method"),e);var ke=W(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.toCommandProperties=qt.toCommandValue=void 0;function En(i){return i==null?"":typeof i=="string"||i instanceof String?i:JSON.stringify(i)}qt.toCommandValue=En;function _n(i){return Object.keys(i).length?{title:i.title,file:i.file,line:i.startLine,endLine:i.endLine,col:i.startColumn,endColumn:i.endColumn}:{}}qt.toCommandProperties=_n});var li=W(K=>{"use strict";var xn=K&&K.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),On=K&&K.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),Tn=K&&K.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.hasOwnProperty.call(i,e)&&xn(t,i,e);return On(t,i),t};Object.defineProperty(K,"__esModule",{value:!0});K.issue=K.issueCommand=void 0;var Rn=Tn(require("os")),ai=ke();function hi(i,t,e){let s=new as(i,t,e);process.stdout.write(s.toString()+Rn.EOL)}K.issueCommand=hi;function An(i,t=""){hi(i,{},t)}K.issue=An;var oi="::",as=class{constructor(t,e,s){t||(t="missing.command"),this.command=t,this.properties=e,this.message=s}toString(){let t=oi+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let e=!0;for(let s in this.properties)if(this.properties.hasOwnProperty(s)){let r=this.properties[s];r&&(e?e=!1:t+=",",t+=`${s}=${Pn(r)}`)}}return t+=`${oi}${kn(this.message)}`,t}};function kn(i){return ai.toCommandValue(i).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Pn(i){return ai.toCommandValue(i).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function oe(){return Pe>Ce.length-16&&(ci.default.randomFillSync(Ce),Pe=0),Ce.slice(Pe,Pe+=16)}var ci,Ce,Pe,hs=B(()=>{ci=ht(require("crypto")),Ce=new Uint8Array(256),Pe=Ce.length});var ui,fi=B(()=>{ui=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Cn(i){return typeof i=="string"&&ui.test(i)}var St,ae=B(()=>{fi();St=Cn});function Dn(i,t=0){let e=(L[i[t+0]]+L[i[t+1]]+L[i[t+2]]+L[i[t+3]]+"-"+L[i[t+4]]+L[i[t+5]]+"-"+L[i[t+6]]+L[i[t+7]]+"-"+L[i[t+8]]+L[i[t+9]]+"-"+L[i[t+10]]+L[i[t+11]]+L[i[t+12]]+L[i[t+13]]+L[i[t+14]]+L[i[t+15]]).toLowerCase();if(!St(e))throw TypeError("Stringified UUID is invalid");return e}var L,bt,he=B(()=>{ae();L=[];for(let i=0;i<256;++i)L.push((i+256).toString(16).substr(1));bt=Dn});function Nn(i,t,e){let s=t&&e||0,r=t||new Array(16);i=i||{};let n=i.node||di,o=i.clockseq!==void 0?i.clockseq:ls;if(n==null||o==null){let f=i.random||(i.rng||oe)();n==null&&(n=di=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),o==null&&(o=ls=(f[6]<<8|f[7])&16383)}let h=i.msecs!==void 0?i.msecs:Date.now(),a=i.nsecs!==void 0?i.nsecs:us+1,l=h-cs+(a-us)/1e4;if(l<0&&i.clockseq===void 0&&(o=o+1&16383),(l<0||h>cs)&&i.nsecs===void 0&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");cs=h,us=a,ls=o,h+=122192928e5;let c=((h&268435455)*1e4+a)%4294967296;r[s++]=c>>>24&255,r[s++]=c>>>16&255,r[s++]=c>>>8&255,r[s++]=c&255;let u=h/4294967296*1e4&268435455;r[s++]=u>>>8&255,r[s++]=u&255,r[s++]=u>>>24&15|16,r[s++]=u>>>16&255,r[s++]=o>>>8|128,r[s++]=o&255;for(let f=0;f<6;++f)r[s+f]=n[f];return t||bt(r)}var di,ls,cs,us,pi,mi=B(()=>{hs();he();cs=0,us=0;pi=Nn});function Mn(i){if(!St(i))throw TypeError("Invalid UUID");let t,e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var De,fs=B(()=>{ae();De=Mn});function Fn(i){i=unescape(encodeURIComponent(i));let t=[];for(let e=0;e<i.length;++e)t.push(i.charCodeAt(e));return t}function Ne(i,t,e){function s(r,n,o,h){if(typeof r=="string"&&(r=Fn(r)),typeof n=="string"&&(n=De(n)),n.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+r.length);if(a.set(n),a.set(r,n.length),a=e(a),a[6]=a[6]&15|t,a[8]=a[8]&63|128,o){h=h||0;for(let l=0;l<16;++l)o[h+l]=a[l];return o}return bt(a)}try{s.name=i}catch{}return s.DNS=Ln,s.URL=Un,s}var Ln,Un,ds=B(()=>{he();fs();Ln="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Un="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function jn(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),gi.default.createHash("md5").update(i).digest()}var gi,wi,yi=B(()=>{gi=ht(require("crypto"));wi=jn});var In,vi,Si=B(()=>{ds();yi();In=Ne("v3",48,wi),vi=In});function Bn(i,t,e){i=i||{};let s=i.random||(i.rng||oe)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=s[r];return t}return bt(s)}var bi,Ei=B(()=>{hs();he();bi=Bn});function $n(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),_i.default.createHash("sha1").update(i).digest()}var _i,xi,Oi=B(()=>{_i=ht(require("crypto"));xi=$n});var qn,Ti,Ri=B(()=>{ds();Oi();qn=Ne("v5",80,xi),Ti=qn});var Ai,ki=B(()=>{Ai="00000000-0000-0000-0000-000000000000"});function Wn(i){if(!St(i))throw TypeError("Invalid UUID");return parseInt(i.substr(14,1),16)}var Pi,Ci=B(()=>{ae();Pi=Wn});var Di={};si(Di,{NIL:()=>Ai,parse:()=>De,stringify:()=>bt,v1:()=>pi,v3:()=>vi,v4:()=>bi,v5:()=>Ti,validate:()=>St,version:()=>Pi});var Ni=B(()=>{mi();Si();Ei();Ri();ki();Ci();ae();he();fs()});var Ui=W(Y=>{"use strict";var zn=Y&&Y.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),Gn=Y&&Y.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),Fi=Y&&Y.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.hasOwnProperty.call(i,e)&&zn(t,i,e);return Gn(t,i),t};Object.defineProperty(Y,"__esModule",{value:!0});Y.prepareKeyValueMessage=Y.issueFileCommand=void 0;var Mi=Fi(require("fs")),ps=Fi(require("os")),Jn=(Ni(),ri(Di)),Li=ke();function Vn(i,t){let e=process.env[`GITHUB_${i}`];if(!e)throw new Error(`Unable to find environment variable for file command ${i}`);if(!Mi.existsSync(e))throw new Error(`Missing file at path: ${e}`);Mi.appendFileSync(e,`${Li.toCommandValue(t)}${ps.EOL}`,{encoding:"utf8"})}Y.issueFileCommand=Vn;function Hn(i,t){let e=`ghadelimiter_${Jn.v4()}`,s=Li.toCommandValue(t);if(i.includes(e))throw new Error(`Unexpected input: name should not contain the delimiter "${e}"`);if(s.includes(e))throw new Error(`Unexpected input: value should not contain the delimiter "${e}"`);return`${i}<<${e}${ps.EOL}${s}${ps.EOL}${e}`}Y.prepareKeyValueMessage=Hn});var Ii=W(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.checkBypass=Wt.getProxyUrl=void 0;function Kn(i){let t=i.protocol==="https:";if(ji(i))return;let e=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(e)return new URL(e)}Wt.getProxyUrl=Kn;function ji(i){if(!i.hostname)return!1;let t=i.hostname;if(Yn(t))return!0;let e=process.env.no_proxy||process.env.NO_PROXY||"";if(!e)return!1;let s;i.port?s=Number(i.port):i.protocol==="http:"?s=80:i.protocol==="https:"&&(s=443);let r=[i.hostname.toUpperCase()];typeof s=="number"&&r.push(`${r[0]}:${s}`);for(let n of e.split(",").map(o=>o.trim().toUpperCase()).filter(o=>o))if(n==="*"||r.some(o=>o===n||o.endsWith(`.${n}`)||n.startsWith(".")&&o.endsWith(`${n}`)))return!0;return!1}Wt.checkBypass=ji;function Yn(i){let t=i.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}});var Wi=W(zt=>{"use strict";var Hh=require("net"),Xn=require("tls"),ms=require("http"),Bi=require("https"),Qn=require("events"),Kh=require("assert"),Zn=require("util");zt.httpOverHttp=to;zt.httpsOverHttp=eo;zt.httpOverHttps=so;zt.httpsOverHttps=io;function to(i){var t=new dt(i);return t.request=ms.request,t}function eo(i){var t=new dt(i);return t.request=ms.request,t.createSocket=$i,t.defaultPort=443,t}function so(i){var t=new dt(i);return t.request=Bi.request,t}function io(i){var t=new dt(i);return t.request=Bi.request,t.createSocket=$i,t.defaultPort=443,t}function dt(i){var t=this;t.options=i||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||ms.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(s,r,n,o){for(var h=qi(r,n,o),a=0,l=t.requests.length;a<l;++a){var c=t.requests[a];if(c.host===h.host&&c.port===h.port){t.requests.splice(a,1),c.request.onSocket(s);return}}s.destroy(),t.removeSocket(s)})}Zn.inherits(dt,Qn.EventEmitter);dt.prototype.addRequest=function(t,e,s,r){var n=this,o=gs({request:t},n.options,qi(e,s,r));if(n.sockets.length>=this.maxSockets){n.requests.push(o);return}n.createSocket(o,function(h){h.on("free",a),h.on("close",l),h.on("agentRemove",l),t.onSocket(h);function a(){n.emit("free",h,o)}function l(c){n.removeSocket(h),h.removeListener("free",a),h.removeListener("close",l),h.removeListener("agentRemove",l)}})};dt.prototype.createSocket=function(t,e){var s=this,r={};s.sockets.push(r);var n=gs({},s.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(n.localAddress=t.localAddress),n.proxyAuth&&(n.headers=n.headers||{},n.headers["Proxy-Authorization"]="Basic "+new Buffer(n.proxyAuth).toString("base64")),Et("making CONNECT request");var o=s.request(n);o.useChunkedEncodingByDefault=!1,o.once("response",h),o.once("upgrade",a),o.once("connect",l),o.once("error",c),o.end();function h(u){u.upgrade=!0}function a(u,f,m){process.nextTick(function(){l(u,f,m)})}function l(u,f,m){if(o.removeAllListeners(),f.removeAllListeners(),u.statusCode!==200){Et("tunneling socket could not be established, statusCode=%d",u.statusCode),f.destroy();var v=new Error("tunneling socket could not be established, statusCode="+u.statusCode);v.code="ECONNRESET",t.request.emit("error",v),s.removeSocket(r);return}if(m.length>0){Et("got illegal response body from proxy"),f.destroy();var v=new Error("got illegal response body from proxy");v.code="ECONNRESET",t.request.emit("error",v),s.removeSocket(r);return}return Et("tunneling connection has established"),s.sockets[s.sockets.indexOf(r)]=f,e(f)}function c(u){o.removeAllListeners(),Et(`tunneling socket could not be established, cause=%s
`,u.message,u.stack);var f=new Error("tunneling socket could not be established, cause="+u.message);f.code="ECONNRESET",t.request.emit("error",f),s.removeSocket(r)}};dt.prototype.removeSocket=function(t){var e=this.sockets.indexOf(t);if(e!==-1){this.sockets.splice(e,1);var s=this.requests.shift();s&&this.createSocket(s,function(r){s.request.onSocket(r)})}};function $i(i,t){var e=this;dt.prototype.createSocket.call(e,i,function(s){var r=i.request.getHeader("host"),n=gs({},e.options,{socket:s,servername:r?r.replace(/:.*$/,""):i.host}),o=Xn.connect(0,n);e.sockets[e.sockets.indexOf(s)]=o,t(o)})}function qi(i,t,e){return typeof i=="string"?{host:i,port:t,localAddress:e}:i}function gs(i){for(var t=1,e=arguments.length;t<e;++t){var s=arguments[t];if(typeof s=="object")for(var r=Object.keys(s),n=0,o=r.length;n<o;++n){var h=r[n];s[h]!==void 0&&(i[h]=s[h])}}return i}var Et;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?Et=function(){var i=Array.prototype.slice.call(arguments);typeof i[0]=="string"?i[0]="TUNNEL: "+i[0]:i.unshift("TUNNEL:"),console.error.apply(console,i)}:Et=function(){};zt.debug=Et});var Gi=W((Xh,zi)=>{zi.exports=Wi()});var Vi=W(E=>{"use strict";var ro=E&&E.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),no=E&&E.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),je=E&&E.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.hasOwnProperty.call(i,e)&&ro(t,i,e);return no(t,i),t},P=E&&E.__awaiter||function(i,t,e,s){function r(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function h(c){try{l(s.next(c))}catch(u){o(u)}}function a(c){try{l(s.throw(c))}catch(u){o(u)}}function l(c){c.done?n(c.value):r(c.value).then(h,a)}l((s=s.apply(i,t||[])).next())})};Object.defineProperty(E,"__esModule",{value:!0});E.HttpClient=E.isHttps=E.HttpClientResponse=E.HttpClientError=E.getProxyUrl=E.MediaTypes=E.Headers=E.HttpCodes=void 0;var Me=je(require("http")),ws=je(require("https")),Ji=je(Ii()),Fe=je(Gi()),it;(function(i){i[i.OK=200]="OK",i[i.MultipleChoices=300]="MultipleChoices",i[i.MovedPermanently=301]="MovedPermanently",i[i.ResourceMoved=302]="ResourceMoved",i[i.SeeOther=303]="SeeOther",i[i.NotModified=304]="NotModified",i[i.UseProxy=305]="UseProxy",i[i.SwitchProxy=306]="SwitchProxy",i[i.TemporaryRedirect=307]="TemporaryRedirect",i[i.PermanentRedirect=308]="PermanentRedirect",i[i.BadRequest=400]="BadRequest",i[i.Unauthorized=401]="Unauthorized",i[i.PaymentRequired=402]="PaymentRequired",i[i.Forbidden=403]="Forbidden",i[i.NotFound=404]="NotFound",i[i.MethodNotAllowed=405]="MethodNotAllowed",i[i.NotAcceptable=406]="NotAcceptable",i[i.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",i[i.RequestTimeout=408]="RequestTimeout",i[i.Conflict=409]="Conflict",i[i.Gone=410]="Gone",i[i.TooManyRequests=429]="TooManyRequests",i[i.InternalServerError=500]="InternalServerError",i[i.NotImplemented=501]="NotImplemented",i[i.BadGateway=502]="BadGateway",i[i.ServiceUnavailable=503]="ServiceUnavailable",i[i.GatewayTimeout=504]="GatewayTimeout"})(it=E.HttpCodes||(E.HttpCodes={}));var $;(function(i){i.Accept="accept",i.ContentType="content-type"})($=E.Headers||(E.Headers={}));var _t;(function(i){i.ApplicationJson="application/json"})(_t=E.MediaTypes||(E.MediaTypes={}));function oo(i){let t=Ji.getProxyUrl(new URL(i));return t?t.href:""}E.getProxyUrl=oo;var ao=[it.MovedPermanently,it.ResourceMoved,it.SeeOther,it.TemporaryRedirect,it.PermanentRedirect],ho=[it.BadGateway,it.ServiceUnavailable,it.GatewayTimeout],lo=["OPTIONS","GET","DELETE","HEAD"],co=10,uo=5,Gt=class extends Error{constructor(t,e){super(t),this.name="HttpClientError",this.statusCode=e,Object.setPrototypeOf(this,Gt.prototype)}};E.HttpClientError=Gt;var Ue=class{constructor(t){this.message=t}readBody(){return P(this,void 0,void 0,function*(){return new Promise(t=>P(this,void 0,void 0,function*(){let e=Buffer.alloc(0);this.message.on("data",s=>{e=Buffer.concat([e,s])}),this.message.on("end",()=>{t(e.toString())})}))})}};E.HttpClientResponse=Ue;function fo(i){return new URL(i).protocol==="https:"}E.isHttps=fo;var ys=class{constructor(t,e,s){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=e||[],this.requestOptions=s,s&&(s.ignoreSslError!=null&&(this._ignoreSslError=s.ignoreSslError),this._socketTimeout=s.socketTimeout,s.allowRedirects!=null&&(this._allowRedirects=s.allowRedirects),s.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=s.allowRedirectDowngrade),s.maxRedirects!=null&&(this._maxRedirects=Math.max(s.maxRedirects,0)),s.keepAlive!=null&&(this._keepAlive=s.keepAlive),s.allowRetries!=null&&(this._allowRetries=s.allowRetries),s.maxRetries!=null&&(this._maxRetries=s.maxRetries))}options(t,e){return P(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,e||{})})}get(t,e){return P(this,void 0,void 0,function*(){return this.request("GET",t,null,e||{})})}del(t,e){return P(this,void 0,void 0,function*(){return this.request("DELETE",t,null,e||{})})}post(t,e,s){return P(this,void 0,void 0,function*(){return this.request("POST",t,e,s||{})})}patch(t,e,s){return P(this,void 0,void 0,function*(){return this.request("PATCH",t,e,s||{})})}put(t,e,s){return P(this,void 0,void 0,function*(){return this.request("PUT",t,e,s||{})})}head(t,e){return P(this,void 0,void 0,function*(){return this.request("HEAD",t,null,e||{})})}sendStream(t,e,s,r){return P(this,void 0,void 0,function*(){return this.request(t,e,s,r)})}getJson(t,e={}){return P(this,void 0,void 0,function*(){e[$.Accept]=this._getExistingOrDefaultHeader(e,$.Accept,_t.ApplicationJson);let s=yield this.get(t,e);return this._processResponse(s,this.requestOptions)})}postJson(t,e,s={}){return P(this,void 0,void 0,function*(){let r=JSON.stringify(e,null,2);s[$.Accept]=this._getExistingOrDefaultHeader(s,$.Accept,_t.ApplicationJson),s[$.ContentType]=this._getExistingOrDefaultHeader(s,$.ContentType,_t.ApplicationJson);let n=yield this.post(t,r,s);return this._processResponse(n,this.requestOptions)})}putJson(t,e,s={}){return P(this,void 0,void 0,function*(){let r=JSON.stringify(e,null,2);s[$.Accept]=this._getExistingOrDefaultHeader(s,$.Accept,_t.ApplicationJson),s[$.ContentType]=this._getExistingOrDefaultHeader(s,$.ContentType,_t.ApplicationJson);let n=yield this.put(t,r,s);return this._processResponse(n,this.requestOptions)})}patchJson(t,e,s={}){return P(this,void 0,void 0,function*(){let r=JSON.stringify(e,null,2);s[$.Accept]=this._getExistingOrDefaultHeader(s,$.Accept,_t.ApplicationJson),s[$.ContentType]=this._getExistingOrDefaultHeader(s,$.ContentType,_t.ApplicationJson);let n=yield this.patch(t,r,s);return this._processResponse(n,this.requestOptions)})}request(t,e,s,r){return P(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let n=new URL(e),o=this._prepareRequest(t,n,r),h=this._allowRetries&&lo.includes(t)?this._maxRetries+1:1,a=0,l;do{if(l=yield this.requestRaw(o,s),l&&l.message&&l.message.statusCode===it.Unauthorized){let u;for(let f of this.handlers)if(f.canHandleAuthentication(l)){u=f;break}return u?u.handleAuthentication(this,o,s):l}let c=this._maxRedirects;for(;l.message.statusCode&&ao.includes(l.message.statusCode)&&this._allowRedirects&&c>0;){let u=l.message.headers.location;if(!u)break;let f=new URL(u);if(n.protocol==="https:"&&n.protocol!==f.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield l.readBody(),f.hostname!==n.hostname)for(let m in r)m.toLowerCase()==="authorization"&&delete r[m];o=this._prepareRequest(t,f,r),l=yield this.requestRaw(o,s),c--}if(!l.message.statusCode||!ho.includes(l.message.statusCode))return l;a+=1,a<h&&(yield l.readBody(),yield this._performExponentialBackoff(a))}while(a<h);return l})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,e){return P(this,void 0,void 0,function*(){return new Promise((s,r)=>{function n(o,h){o?r(o):h?s(h):r(new Error("Unknown error"))}this.requestRawWithCallback(t,e,n)})})}requestRawWithCallback(t,e,s){typeof e=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(e,"utf8"));let r=!1;function n(a,l){r||(r=!0,s(a,l))}let o=t.httpModule.request(t.options,a=>{let l=new Ue(a);n(void 0,l)}),h;o.on("socket",a=>{h=a}),o.setTimeout(this._socketTimeout||3*6e4,()=>{h&&h.end(),n(new Error(`Request timeout: ${t.options.path}`))}),o.on("error",function(a){n(a)}),e&&typeof e=="string"&&o.write(e,"utf8"),e&&typeof e!="string"?(e.on("close",function(){o.end()}),e.pipe(o)):o.end()}getAgent(t){let e=new URL(t);return this._getAgent(e)}_prepareRequest(t,e,s){let r={};r.parsedUrl=e;let n=r.parsedUrl.protocol==="https:";r.httpModule=n?ws:Me;let o=n?443:80;if(r.options={},r.options.host=r.parsedUrl.hostname,r.options.port=r.parsedUrl.port?parseInt(r.parsedUrl.port):o,r.options.path=(r.parsedUrl.pathname||"")+(r.parsedUrl.search||""),r.options.method=t,r.options.headers=this._mergeHeaders(s),this.userAgent!=null&&(r.options.headers["user-agent"]=this.userAgent),r.options.agent=this._getAgent(r.parsedUrl),this.handlers)for(let h of this.handlers)h.prepareRequest(r.options);return r}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Le(this.requestOptions.headers),Le(t||{})):Le(t||{})}_getExistingOrDefaultHeader(t,e,s){let r;return this.requestOptions&&this.requestOptions.headers&&(r=Le(this.requestOptions.headers)[e]),t[e]||r||s}_getAgent(t){let e,s=Ji.getProxyUrl(t),r=s&&s.hostname;if(this._keepAlive&&r&&(e=this._proxyAgent),this._keepAlive&&!r&&(e=this._agent),e)return e;let n=t.protocol==="https:",o=100;if(this.requestOptions&&(o=this.requestOptions.maxSockets||Me.globalAgent.maxSockets),s&&s.hostname){let h={maxSockets:o,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(s.username||s.password)&&{proxyAuth:`${s.username}:${s.password}`}),{host:s.hostname,port:s.port})},a,l=s.protocol==="https:";n?a=l?Fe.httpsOverHttps:Fe.httpsOverHttp:a=l?Fe.httpOverHttps:Fe.httpOverHttp,e=a(h),this._proxyAgent=e}if(this._keepAlive&&!e){let h={keepAlive:this._keepAlive,maxSockets:o};e=n?new ws.Agent(h):new Me.Agent(h),this._agent=e}return e||(e=n?ws.globalAgent:Me.globalAgent),n&&this._ignoreSslError&&(e.options=Object.assign(e.options||{},{rejectUnauthorized:!1})),e}_performExponentialBackoff(t){return P(this,void 0,void 0,function*(){t=Math.min(co,t);let e=uo*Math.pow(2,t);return new Promise(s=>setTimeout(()=>s(),e))})}_processResponse(t,e){return P(this,void 0,void 0,function*(){return new Promise((s,r)=>P(this,void 0,void 0,function*(){let n=t.message.statusCode||0,o={statusCode:n,result:null,headers:{}};n===it.NotFound&&s(o);function h(c,u){if(typeof u=="string"){let f=new Date(u);if(!isNaN(f.valueOf()))return f}return u}let a,l;try{l=yield t.readBody(),l&&l.length>0&&(e&&e.deserializeDates?a=JSON.parse(l,h):a=JSON.parse(l),o.result=a),o.headers=t.message.headers}catch{}if(n>299){let c;a&&a.message?c=a.message:l&&l.length>0?c=l:c=`Failed request: (${n})`;let u=new Gt(c,n);u.result=o.result,r(u)}else s(o)}))})}};E.HttpClient=ys;var Le=i=>Object.keys(i).reduce((t,e)=>(t[e.toLowerCase()]=i[e],t),{})});var Hi=W(lt=>{"use strict";var Es=lt&&lt.__awaiter||function(i,t,e,s){function r(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function h(c){try{l(s.next(c))}catch(u){o(u)}}function a(c){try{l(s.throw(c))}catch(u){o(u)}}function l(c){c.done?n(c.value):r(c.value).then(h,a)}l((s=s.apply(i,t||[])).next())})};Object.defineProperty(lt,"__esModule",{value:!0});lt.PersonalAccessTokenCredentialHandler=lt.BearerCredentialHandler=lt.BasicCredentialHandler=void 0;var vs=class{constructor(t,e){this.username=t,this.password=e}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Es(this,void 0,void 0,function*(){throw new Error("not implemented")})}};lt.BasicCredentialHandler=vs;var Ss=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Es(this,void 0,void 0,function*(){throw new Error("not implemented")})}};lt.BearerCredentialHandler=Ss;var bs=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Es(this,void 0,void 0,function*(){throw new Error("not implemented")})}};lt.PersonalAccessTokenCredentialHandler=bs});var Xi=W(Jt=>{"use strict";var Ki=Jt&&Jt.__awaiter||function(i,t,e,s){function r(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function h(c){try{l(s.next(c))}catch(u){o(u)}}function a(c){try{l(s.throw(c))}catch(u){o(u)}}function l(c){c.done?n(c.value):r(c.value).then(h,a)}l((s=s.apply(i,t||[])).next())})};Object.defineProperty(Jt,"__esModule",{value:!0});Jt.OidcClient=void 0;var po=Vi(),mo=Hi(),Yi=_s(),xt=class{static createHttpClient(t=!0,e=10){let s={allowRetries:t,maxRetries:e};return new po.HttpClient("actions/oidc-client",[new mo.BearerCredentialHandler(xt.getRequestToken())],s)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var e;return Ki(this,void 0,void 0,function*(){let n=(e=(yield xt.createHttpClient().getJson(t).catch(o=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${o.statusCode}
 
        Error Message: ${o.result.message}`)})).result)===null||e===void 0?void 0:e.value;if(!n)throw new Error("Response json body do not have ID Token field");return n})}static getIDToken(t){return Ki(this,void 0,void 0,function*(){try{let e=xt.getIDTokenUrl();if(t){let r=encodeURIComponent(t);e=`${e}&audience=${r}`}Yi.debug(`ID token url is ${e}`);let s=yield xt.getCall(e);return Yi.setSecret(s),s}catch(e){throw new Error(`Error message: ${e.message}`)}})}};Jt.OidcClient=xt});var Rs=W(z=>{"use strict";var xs=z&&z.__awaiter||function(i,t,e,s){function r(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function h(c){try{l(s.next(c))}catch(u){o(u)}}function a(c){try{l(s.throw(c))}catch(u){o(u)}}function l(c){c.done?n(c.value):r(c.value).then(h,a)}l((s=s.apply(i,t||[])).next())})};Object.defineProperty(z,"__esModule",{value:!0});z.summary=z.markdownSummary=z.SUMMARY_DOCS_URL=z.SUMMARY_ENV_VAR=void 0;var go=require("os"),Os=require("fs"),{access:wo,appendFile:yo,writeFile:vo}=Os.promises;z.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";z.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Ts=class{constructor(){this._buffer=""}filePath(){return xs(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[z.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${z.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield wo(t,Os.constants.R_OK|Os.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,e,s={}){let r=Object.entries(s).map(([n,o])=>` ${n}="${o}"`).join("");return e?`<${t}${r}>${e}</${t}>`:`<${t}${r}>`}write(t){return xs(this,void 0,void 0,function*(){let e=!!t?.overwrite,s=yield this.filePath();return yield(e?vo:yo)(s,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return xs(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,e=!1){return this._buffer+=t,e?this.addEOL():this}addEOL(){return this.addRaw(go.EOL)}addCodeBlock(t,e){let s=Object.assign({},e&&{lang:e}),r=this.wrap("pre",this.wrap("code",t),s);return this.addRaw(r).addEOL()}addList(t,e=!1){let s=e?"ol":"ul",r=t.map(o=>this.wrap("li",o)).join(""),n=this.wrap(s,r);return this.addRaw(n).addEOL()}addTable(t){let e=t.map(r=>{let n=r.map(o=>{if(typeof o=="string")return this.wrap("td",o);let{header:h,data:a,colspan:l,rowspan:c}=o,u=h?"th":"td",f=Object.assign(Object.assign({},l&&{colspan:l}),c&&{rowspan:c});return this.wrap(u,a,f)}).join("");return this.wrap("tr",n)}).join(""),s=this.wrap("table",e);return this.addRaw(s).addEOL()}addDetails(t,e){let s=this.wrap("details",this.wrap("summary",t)+e);return this.addRaw(s).addEOL()}addImage(t,e,s){let{width:r,height:n}=s||{},o=Object.assign(Object.assign({},r&&{width:r}),n&&{height:n}),h=this.wrap("img",null,Object.assign({src:t,alt:e},o));return this.addRaw(h).addEOL()}addHeading(t,e){let s=`h${e}`,r=["h1","h2","h3","h4","h5","h6"].includes(s)?s:"h1",n=this.wrap(r,t);return this.addRaw(n).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,e){let s=Object.assign({},e&&{cite:e}),r=this.wrap("blockquote",t,s);return this.addRaw(r).addEOL()}addLink(t,e){let s=this.wrap("a",t,{href:e});return this.addRaw(s).addEOL()}},Qi=new Ts;z.markdownSummary=Qi;z.summary=Qi});var Zi=W(G=>{"use strict";var So=G&&G.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),bo=G&&G.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),Eo=G&&G.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.hasOwnProperty.call(i,e)&&So(t,i,e);return bo(t,i),t};Object.defineProperty(G,"__esModule",{value:!0});G.toPlatformPath=G.toWin32Path=G.toPosixPath=void 0;var _o=Eo(require("path"));function xo(i){return i.replace(/[\\]/g,"/")}G.toPosixPath=xo;function Oo(i){return i.replace(/[/]/g,"\\")}G.toWin32Path=Oo;function To(i){return i.replace(/[/\\]/g,_o.sep)}G.toPlatformPath=To});var _s=W(w=>{"use strict";var Ro=w&&w.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),Ao=w&&w.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),tr=w&&w.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.hasOwnProperty.call(i,e)&&Ro(t,i,e);return Ao(t,i),t},er=w&&w.__awaiter||function(i,t,e,s){function r(n){return n instanceof e?n:new e(function(o){o(n)})}return new(e||(e=Promise))(function(n,o){function h(c){try{l(s.next(c))}catch(u){o(u)}}function a(c){try{l(s.throw(c))}catch(u){o(u)}}function l(c){c.done?n(c.value):r(c.value).then(h,a)}l((s=s.apply(i,t||[])).next())})};Object.defineProperty(w,"__esModule",{value:!0});w.getIDToken=w.getState=w.saveState=w.group=w.endGroup=w.startGroup=w.info=w.notice=w.warning=w.error=w.debug=w.isDebug=w.setFailed=w.setCommandEcho=w.setOutput=w.getBooleanInput=w.getMultilineInput=w.getInput=w.addPath=w.setSecret=w.exportVariable=w.ExitCode=void 0;var X=li(),Dt=Ui(),Vt=ke(),sr=tr(require("os")),ko=tr(require("path")),Po=Xi(),ir;(function(i){i[i.Success=0]="Success",i[i.Failure=1]="Failure"})(ir=w.ExitCode||(w.ExitCode={}));function Co(i,t){let e=Vt.toCommandValue(t);if(process.env[i]=e,process.env.GITHUB_ENV||"")return Dt.issueFileCommand("ENV",Dt.prepareKeyValueMessage(i,t));X.issueCommand("set-env",{name:i},e)}w.exportVariable=Co;function Do(i){X.issueCommand("add-mask",{},i)}w.setSecret=Do;function No(i){process.env.GITHUB_PATH||""?Dt.issueFileCommand("PATH",i):X.issueCommand("add-path",{},i),process.env.PATH=`${i}${ko.delimiter}${process.env.PATH}`}w.addPath=No;function As(i,t){let e=process.env[`INPUT_${i.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!e)throw new Error(`Input required and not supplied: ${i}`);return t&&t.trimWhitespace===!1?e:e.trim()}w.getInput=As;function Mo(i,t){let e=As(i,t).split(`
`).filter(s=>s!=="");return t&&t.trimWhitespace===!1?e:e.map(s=>s.trim())}w.getMultilineInput=Mo;function Fo(i,t){let e=["true","True","TRUE"],s=["false","False","FALSE"],r=As(i,t);if(e.includes(r))return!0;if(s.includes(r))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${i}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}w.getBooleanInput=Fo;function Lo(i,t){if(process.env.GITHUB_OUTPUT||"")return Dt.issueFileCommand("OUTPUT",Dt.prepareKeyValueMessage(i,t));process.stdout.write(sr.EOL),X.issueCommand("set-output",{name:i},Vt.toCommandValue(t))}w.setOutput=Lo;function Uo(i){X.issue("echo",i?"on":"off")}w.setCommandEcho=Uo;function jo(i){process.exitCode=ir.Failure,rr(i)}w.setFailed=jo;function Io(){return process.env.RUNNER_DEBUG==="1"}w.isDebug=Io;function Bo(i){X.issueCommand("debug",{},i)}w.debug=Bo;function rr(i,t={}){X.issueCommand("error",Vt.toCommandProperties(t),i instanceof Error?i.toString():i)}w.error=rr;function $o(i,t={}){X.issueCommand("warning",Vt.toCommandProperties(t),i instanceof Error?i.toString():i)}w.warning=$o;function qo(i,t={}){X.issueCommand("notice",Vt.toCommandProperties(t),i instanceof Error?i.toString():i)}w.notice=qo;function Wo(i){process.stdout.write(i+sr.EOL)}w.info=Wo;function nr(i){X.issue("group",i)}w.startGroup=nr;function or(){X.issue("endgroup")}w.endGroup=or;function zo(i,t){return er(this,void 0,void 0,function*(){nr(i);let e;try{e=yield t()}finally{or()}return e})}w.group=zo;function Go(i,t){if(process.env.GITHUB_STATE||"")return Dt.issueFileCommand("STATE",Dt.prepareKeyValueMessage(i,t));X.issueCommand("save-state",{name:i},Vt.toCommandValue(t))}w.saveState=Go;function Jo(i){return process.env[`STATE_${i}`]||""}w.getState=Jo;function Vo(i){return er(this,void 0,void 0,function*(){return yield Po.OidcClient.getIDToken(i)})}w.getIDToken=Vo;var Ho=Rs();Object.defineProperty(w,"summary",{enumerable:!0,get:function(){return Ho.summary}});var Ko=Rs();Object.defineProperty(w,"markdownSummary",{enumerable:!0,get:function(){return Ko.markdownSummary}});var ks=Zi();Object.defineProperty(w,"toPosixPath",{enumerable:!0,get:function(){return ks.toPosixPath}});Object.defineProperty(w,"toWin32Path",{enumerable:!0,get:function(){return ks.toWin32Path}});Object.defineProperty(w,"toPlatformPath",{enumerable:!0,get:function(){return ks.toPlatformPath}})});var fr=W((ol,ur)=>{"use strict";ur.exports=lr;function lr(i,t,e){i instanceof RegExp&&(i=hr(i,e)),t instanceof RegExp&&(t=hr(t,e));var s=cr(i,t,e);return s&&{start:s[0],end:s[1],pre:e.slice(0,s[0]),body:e.slice(s[0]+i.length,s[1]),post:e.slice(s[1]+t.length)}}function hr(i,t){var e=t.match(i);return e?e[0]:null}lr.range=cr;function cr(i,t,e){var s,r,n,o,h,a=e.indexOf(i),l=e.indexOf(t,a+1),c=a;if(a>=0&&l>0){if(i===t)return[a,l];for(s=[],n=e.length;c>=0&&!h;)c==a?(s.push(c),a=e.indexOf(i,c+1)):s.length==1?h=[s.pop(),l]:(r=s.pop(),r<n&&(n=r,o=l),l=e.indexOf(t,c+1)),c=a<l&&a>=0?a:l;s.length&&(h=[n,o])}return h}});var Sr=W((al,vr)=>{var dr=fr();vr.exports=Zo;var pr="\0SLASH"+Math.random()+"\0",mr="\0OPEN"+Math.random()+"\0",Ds="\0CLOSE"+Math.random()+"\0",gr="\0COMMA"+Math.random()+"\0",wr="\0PERIOD"+Math.random()+"\0";function Cs(i){return parseInt(i,10)==i?parseInt(i,10):i.charCodeAt(0)}function Xo(i){return i.split("\\\\").join(pr).split("\\{").join(mr).split("\\}").join(Ds).split("\\,").join(gr).split("\\.").join(wr)}function Qo(i){return i.split(pr).join("\\").split(mr).join("{").split(Ds).join("}").split(gr).join(",").split(wr).join(".")}function yr(i){if(!i)return[""];var t=[],e=dr("{","}",i);if(!e)return i.split(",");var s=e.pre,r=e.body,n=e.post,o=s.split(",");o[o.length-1]+="{"+r+"}";var h=yr(n);return n.length&&(o[o.length-1]+=h.shift(),o.push.apply(o,h)),t.push.apply(t,o),t}function Zo(i){return i?(i.substr(0,2)==="{}"&&(i="\\{\\}"+i.substr(2)),le(Xo(i),!0).map(Qo)):[]}function ta(i){return"{"+i+"}"}function ea(i){return/^-?0\d/.test(i)}function sa(i,t){return i<=t}function ia(i,t){return i>=t}function le(i,t){var e=[],s=dr("{","}",i);if(!s)return[i];var r=s.pre,n=s.post.length?le(s.post,!1):[""];if(/\$$/.test(s.pre))for(var o=0;o<n.length;o++){var h=r+"{"+s.body+"}"+n[o];e.push(h)}else{var a=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),c=a||l,u=s.body.indexOf(",")>=0;if(!c&&!u)return s.post.match(/,.*\}/)?(i=s.pre+"{"+s.body+Ds+s.post,le(i)):[i];var f;if(c)f=s.body.split(/\.\./);else if(f=yr(s.body),f.length===1&&(f=le(f[0],!1).map(ta),f.length===1))return n.map(function(Ae){return s.pre+f[0]+Ae});var m;if(c){var v=Cs(f[0]),d=Cs(f[1]),y=Math.max(f[0].length,f[1].length),g=f.length==3?Math.abs(Cs(f[2])):1,S=sa,_=d<v;_&&(g*=-1,S=ia);var b=f.some(ea);m=[];for(var T=v;S(T,d);T+=g){var D;if(l)D=String.fromCharCode(T),D==="\\"&&(D="");else if(D=String(T),b){var st=y-D.length;if(st>0){var Re=new Array(st+1).join("0");T<0?D="-"+Re+D.slice(1):D=Re+D}}m.push(D)}}else{m=[];for(var at=0;at<f.length;at++)m.push.apply(m,le(f[at],!1))}for(var at=0;at<m.length;at++)for(var o=0;o<n.length;o++){var h=r+m[at]+n[o];(!t||c||h)&&e.push(h)}}return e}});var nh={};si(nh,{run:()=>mn});module.exports=ri(nh);var Bt=ht(_s());var Ps=i=>(t,e,s)=>i.reduce((r,n)=>n(r||t,e,s),void 0);var Yo=["devDependencies","optionalDependencies","peerDependencies","dependencies"],ar=(i,t)=>{console.log(i);let e=Yo.reduce((s,r)=>{if(r in i){let n=i[r];return s.concat(Object.keys(n).filter(o=>n[o]===t))}return s},[]);if(e.length>0)throw new Error(`Placeholder found in distributable package ${i.name} after transformation; deps: ${e}`);return i};var Te=ht(require("fs/promises"));var Pr=ht(Sr(),1);var ce=i=>{if(typeof i!="string")throw new TypeError("invalid pattern");if(i.length>65536)throw new TypeError("pattern is too long")};var ra={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},ue=i=>i.replace(/[[\]\\-]/g,"\\$&"),na=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),br=i=>i.join(""),Er=(i,t)=>{let e=t;if(i.charAt(e)!=="[")throw new Error("not in a brace expression");let s=[],r=[],n=e+1,o=!1,h=!1,a=!1,l=!1,c=e,u="";t:for(;n<i.length;){let d=i.charAt(n);if((d==="!"||d==="^")&&n===e+1){l=!0,n++;continue}if(d==="]"&&o&&!a){c=n+1;break}if(o=!0,d==="\\"&&!a){a=!0,n++;continue}if(d==="["&&!a){for(let[y,[g,S,_]]of Object.entries(ra))if(i.startsWith(y,n)){if(u)return["$.",!1,i.length-e,!0];n+=y.length,_?r.push(g):s.push(g),h=h||S;continue t}}if(a=!1,u){d>u?s.push(ue(u)+"-"+ue(d)):d===u&&s.push(ue(d)),u="",n++;continue}if(i.startsWith("-]",n+1)){s.push(ue(d+"-")),n+=2;continue}if(i.startsWith("-",n+1)){u=d,n+=2;continue}s.push(ue(d)),n++}if(c<n)return["",!1,0,!1];if(!s.length&&!r.length)return["$.",!1,i.length-e,!0];if(r.length===0&&s.length===1&&/^\\?.$/.test(s[0])&&!l){let d=s[0].length===2?s[0].slice(-1):s[0];return[na(d),!1,c-e,!1]}let f="["+(l?"^":"")+br(s)+"]",m="["+(l?"":"^")+br(r)+"]";return[s.length&&r.length?"("+f+"|"+m+")":s.length?f:m,h,c-e,!0]};var rt=(i,{windowsPathsNoEscape:t=!1}={})=>t?i.replace(/\[([^\/\\])\]/g,"$1"):i.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var oa=new Set(["!","?","+","*","@"]),_r=i=>oa.has(i),aa="(?!\\.\\.?(?:$|/))",Ns="(?!\\.)",ha=new Set(["[","."]),la=new Set(["..","."]),ca=new Set("().*{}+?[]^$\\!"),ua=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Ms="[^/]",xr=Ms+"*?",Or=Ms+"+?",C,N,pt,O,k,Ot,Nt,Tt,Q,Mt,fe,Be,Tr,Ht,Ie,$e,Rr,J=class{constructor(t,e,s={}){F(this,Be);ni(this,"type");F(this,C,void 0);F(this,N,void 0);F(this,pt,!1);F(this,O,[]);F(this,k,void 0);F(this,Ot,void 0);F(this,Nt,void 0);F(this,Tt,!1);F(this,Q,void 0);F(this,Mt,void 0);F(this,fe,!1);this.type=t,t&&x(this,N,!0),x(this,k,e),x(this,C,p(this,k)?p(p(this,k),C):this),x(this,Q,p(this,C)===this?s:p(p(this,C),Q)),x(this,Nt,p(this,C)===this?[]:p(p(this,C),Nt)),t==="!"&&!p(p(this,C),Tt)&&p(this,Nt).push(this),x(this,Ot,p(this,k)?p(p(this,k),O).length:0)}get hasMagic(){if(p(this,N)!==void 0)return p(this,N);for(let t of p(this,O))if(typeof t!="string"&&(t.type||t.hasMagic))return x(this,N,!0);return p(this,N)}toString(){return p(this,Mt)!==void 0?p(this,Mt):this.type?x(this,Mt,this.type+"("+p(this,O).map(t=>String(t)).join("|")+")"):x(this,Mt,p(this,O).map(t=>String(t)).join(""))}push(...t){for(let e of t)if(e!==""){if(typeof e!="string"&&!(e instanceof J&&p(e,k)===this))throw new Error("invalid part: "+e);p(this,O).push(e)}}toJSON(){let t=this.type===null?p(this,O).slice().map(e=>typeof e=="string"?e:e.toJSON()):[this.type,...p(this,O).map(e=>e.toJSON())];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===p(this,C)||p(p(this,C),Tt)&&p(this,k)?.type==="!")&&t.push({}),t}isStart(){if(p(this,C)===this)return!0;if(!p(this,k)?.isStart())return!1;if(p(this,Ot)===0)return!0;let t=p(this,k);for(let e=0;e<p(this,Ot);e++){let s=p(t,O)[e];if(!(s instanceof J&&s.type==="!"))return!1}return!0}isEnd(){if(p(this,C)===this||p(this,k)?.type==="!")return!0;if(!p(this,k)?.isEnd())return!1;if(!this.type)return p(this,k)?.isEnd();let t=p(this,k)?p(p(this,k),O).length:0;return p(this,Ot)===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){let e=new J(this.type,t);for(let s of p(this,O))e.copyIn(s);return e}static fromGlob(t,e={}){var r;let s=new J(null,void 0,e);return $t(r=J,Ht,Ie).call(r,t,s,0,e),s}toMMPattern(){if(this!==p(this,C))return p(this,C).toMMPattern();let t=this.toString(),[e,s,r,n]=this.toRegExpSource();if(!(r||p(this,N)||p(this,Q).nocase&&!p(this,Q).nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return s;let h=(p(this,Q).nocase?"i":"")+(n?"u":"");return Object.assign(new RegExp(`^${e}$`,h),{_src:e,_glob:t})}toRegExpSource(){if(p(this,C)===this&&$t(this,Be,Tr).call(this),!this.type){let r=this.isStart()&&this.isEnd(),n=p(this,O).map(l=>{var v;let[c,u,f,m]=typeof l=="string"?$t(v=J,$e,Rr).call(v,l,p(this,N),r):l.toRegExpSource();return x(this,N,p(this,N)||f),x(this,pt,p(this,pt)||m),c}).join(""),o="";if(this.isStart()&&typeof p(this,O)[0]=="string"&&!(p(this,O).length===1&&la.has(p(this,O)[0]))){let c=ha,u=p(this,Q).dot&&c.has(n.charAt(0))||n.startsWith("\\.")&&c.has(n.charAt(2))||n.startsWith("\\.\\.")&&c.has(n.charAt(4)),f=!p(this,Q).dot&&c.has(n.charAt(0));o=u?aa:f?Ns:""}let h="";return this.isEnd()&&p(p(this,C),Tt)&&p(this,k)?.type==="!"&&(h="(?:$|\\/)"),[o+n+h,rt(n),x(this,N,!!p(this,N)),p(this,pt)]}let t=this.type==="!"?"(?:(?!(?:":"(?:",e=p(this,O).map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,o,h,a]=r.toRegExpSource();return x(this,pt,p(this,pt)||a),n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|");if(this.isStart()&&this.isEnd()&&!e&&this.type!=="!"){let r=this.toString();return x(this,O,[r]),this.type=null,x(this,N,void 0),[r,rt(this.toString()),!1,!1]}let s="";if(this.type==="!"&&p(this,fe))s=(this.isStart()&&!p(this,Q).dot?Ns:"")+Or;else{let r=this.type==="!"?"))"+(this.isStart()&&!p(this,Q).dot?Ns:"")+xr+")":this.type==="@"?")":`)${this.type}`;s=t+e+r}return[s,rt(e),x(this,N,!!p(this,N)),p(this,pt)]}},Rt=J;C=new WeakMap,N=new WeakMap,pt=new WeakMap,O=new WeakMap,k=new WeakMap,Ot=new WeakMap,Nt=new WeakMap,Tt=new WeakMap,Q=new WeakMap,Mt=new WeakMap,fe=new WeakMap,Be=new WeakSet,Tr=function(){if(this!==p(this,C))throw new Error("should only call on root");if(p(this,Tt))return this;this.toString(),x(this,Tt,!0);let t;for(;t=p(this,Nt).pop();){if(t.type!=="!")continue;let e=t,s=p(e,k);for(;s;){for(let r=p(e,Ot)+1;!s.type&&r<p(s,O).length;r++)for(let n of p(t,O)){if(typeof n=="string")throw new Error("string part in extglob AST??");n.copyIn(p(s,O)[r])}e=s,s=p(e,k)}}return this},Ht=new WeakSet,Ie=function(t,e,s,r){var m,v;let n=!1,o=!1,h=-1,a=!1;if(e.type===null){let d=s,y="";for(;d<t.length;){let g=t.charAt(d++);if(n||g==="\\"){n=!n,y+=g;continue}if(o){d===h+1?(g==="^"||g==="!")&&(a=!0):g==="]"&&!(d===h+2&&a)&&(o=!1),y+=g;continue}else if(g==="["){o=!0,h=d,a=!1,y+=g;continue}if(!r.noext&&_r(g)&&t.charAt(d)==="("){e.push(y),y="";let S=new J(g,e);d=$t(m=J,Ht,Ie).call(m,t,S,d,r),e.push(S);continue}y+=g}return e.push(y),d}let l=s+1,c=new J(null,e),u=[],f="";for(;l<t.length;){let d=t.charAt(l++);if(n||d==="\\"){n=!n,f+=d;continue}if(o){l===h+1?(d==="^"||d==="!")&&(a=!0):d==="]"&&!(l===h+2&&a)&&(o=!1),f+=d;continue}else if(d==="["){o=!0,h=l,a=!1,f+=d;continue}if(_r(d)&&t.charAt(l)==="("){c.push(f),f="";let y=new J(d,c);c.push(y),l=$t(v=J,Ht,Ie).call(v,t,y,l,r);continue}if(d==="|"){c.push(f),f="",u.push(c),c=new J(null,e);continue}if(d===")")return f===""&&p(e,O).length===0&&x(e,fe,!0),c.push(f),f="",e.push(...u,c),l;f+=d}return e.type=null,x(e,N,void 0),x(e,O,[t.substring(s-1)]),l},$e=new WeakSet,Rr=function(t,e,s=!1){let r=!1,n="",o=!1;for(let h=0;h<t.length;h++){let a=t.charAt(h);if(r){r=!1,n+=(ca.has(a)?"\\":"")+a;continue}if(a==="\\"){h===t.length-1?n+="\\\\":r=!0;continue}if(a==="["){let[l,c,u,f]=Er(t,h);if(u){n+=l,o=o||c,h+=u-1,e=e||f;continue}}if(a==="*"){s&&t==="*"?n+=Or:n+=xr,e=!0;continue}if(a==="?"){n+=Ms,e=!0;continue}n+=ua(a)}return[n,rt(t),!!e,o]},F(Rt,Ht),F(Rt,$e);var Kt=(i,{windowsPathsNoEscape:t=!1}={})=>t?i.replace(/[?*()[\]]/g,"[$&]"):i.replace(/[?*()[\]\\]/g,"\\$&");var q=(i,t,e={})=>(ce(t),!e.nocomment&&t.charAt(0)==="#"?!1:new H(t,e).match(i)),fa=/^\*+([^+@!?\*\[\(]*)$/,da=i=>t=>!t.startsWith(".")&&t.endsWith(i),pa=i=>t=>t.endsWith(i),ma=i=>(i=i.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(i)),ga=i=>(i=i.toLowerCase(),t=>t.toLowerCase().endsWith(i)),wa=/^\*+\.\*+$/,ya=i=>!i.startsWith(".")&&i.includes("."),va=i=>i!=="."&&i!==".."&&i.includes("."),Sa=/^\.\*+$/,ba=i=>i!=="."&&i!==".."&&i.startsWith("."),Ea=/^\*+$/,_a=i=>i.length!==0&&!i.startsWith("."),xa=i=>i.length!==0&&i!=="."&&i!=="..",Oa=/^\?+([^+@!?\*\[\(]*)?$/,Ta=([i,t=""])=>{let e=Cr([i]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},Ra=([i,t=""])=>{let e=Dr([i]);return t?(t=t.toLowerCase(),s=>e(s)&&s.toLowerCase().endsWith(t)):e},Aa=([i,t=""])=>{let e=Dr([i]);return t?s=>e(s)&&s.endsWith(t):e},ka=([i,t=""])=>{let e=Cr([i]);return t?s=>e(s)&&s.endsWith(t):e},Cr=([i])=>{let t=i.length;return e=>e.length===t&&!e.startsWith(".")},Dr=([i])=>{let t=i.length;return e=>e.length===t&&e!=="."&&e!==".."},Nr=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Ar={win32:{sep:"\\"},posix:{sep:"/"}},Pa=Nr==="win32"?Ar.win32.sep:Ar.posix.sep;q.sep=Pa;var U=Symbol("globstar **");q.GLOBSTAR=U;var Ca="[^/]",Da=Ca+"*?",Na="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Ma="(?:(?!(?:\\/|^)\\.).)*?",Fa=(i,t={})=>e=>q(e,i,t);q.filter=Fa;var Z=(i,t={})=>Object.assign({},i,t),La=i=>{if(!i||typeof i!="object"||!Object.keys(i).length)return q;let t=q;return Object.assign((s,r,n={})=>t(s,r,Z(i,n)),{Minimatch:class extends t.Minimatch{constructor(r,n={}){super(r,Z(i,n))}static defaults(r){return t.defaults(Z(i,r)).Minimatch}},AST:class extends t.AST{constructor(r,n,o={}){super(r,n,Z(i,o))}static fromGlob(r,n={}){return t.AST.fromGlob(r,Z(i,n))}},unescape:(s,r={})=>t.unescape(s,Z(i,r)),escape:(s,r={})=>t.escape(s,Z(i,r)),filter:(s,r={})=>t.filter(s,Z(i,r)),defaults:s=>t.defaults(Z(i,s)),makeRe:(s,r={})=>t.makeRe(s,Z(i,r)),braceExpand:(s,r={})=>t.braceExpand(s,Z(i,r)),match:(s,r,n={})=>t.match(s,r,Z(i,n)),sep:t.sep,GLOBSTAR:U})};q.defaults=La;var Mr=(i,t={})=>(ce(i),t.nobrace||!/\{(?:(?!\{).)*\}/.test(i)?[i]:(0,Pr.default)(i));q.braceExpand=Mr;var Ua=(i,t={})=>new H(i,t).makeRe();q.makeRe=Ua;var ja=(i,t,e={})=>{let s=new H(t,e);return i=i.filter(r=>s.match(r)),s.options.nonull&&!i.length&&i.push(t),i};q.match=ja;var kr=/[?*]|[+@!]\(.*?\)|\[|\]/,Ia=i=>i.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),H=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){ce(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||Nr,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let t of this.set)for(let e of t)if(typeof e!="string")return!0;return!1}debug(...t){}make(){let t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...n)=>console.error(...n)),this.debug(this.pattern,this.globSet);let s=this.globSet.map(n=>this.slashSplit(n));this.globParts=this.preprocess(s),this.debug(this.pattern,this.globParts);let r=this.globParts.map((n,o,h)=>{if(this.isWindows&&this.windowsNoMagicRoot){let a=n[0]===""&&n[1]===""&&(n[2]==="?"||!kr.test(n[2]))&&!kr.test(n[3]),l=/^[a-z]:/i.test(n[0]);if(a)return[...n.slice(0,4),...n.slice(4).map(c=>this.parse(c))];if(l)return[n[0],...n.slice(1).map(c=>this.parse(c))]}return n.map(a=>this.parse(a))});if(this.debug(this.pattern,r),this.set=r.filter(n=>n.indexOf(!1)===-1),this.isWindows)for(let n=0;n<this.set.length;n++){let o=this.set[n];o[0]===""&&o[1]===""&&this.globParts[n][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let s=0;s<t.length;s++)for(let r=0;r<t[s].length;r++)t[s][r]==="**"&&(t[s][r]="*");let{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):e>=1?t=this.levelOneOptimize(t):t=this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let s=-1;for(;(s=e.indexOf("**",s+1))!==-1;){let r=s;for(;e[r+1]==="**";)r++;r!==s&&e.splice(s,r-s)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((s,r)=>{let n=s[s.length-1];return r==="**"&&n==="**"?s:r===".."&&n&&n!==".."&&n!=="."&&n!=="**"?(s.pop(),s):(s.push(r),s)},[]),e.length===0?[""]:e))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let r=1;r<t.length-1;r++){let n=t[r];r===1&&n===""&&t[0]===""||(n==="."||n==="")&&(e=!0,t.splice(r,1),r--)}t[0]==="."&&t.length===2&&(t[1]==="."||t[1]==="")&&(e=!0,t.pop())}let s=0;for(;(s=t.indexOf("..",s+1))!==-1;){let r=t[s-1];r&&r!=="."&&r!==".."&&r!=="**"&&(e=!0,t.splice(s-1,2),s-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let s of t){let r=-1;for(;(r=s.indexOf("**",r+1))!==-1;){let o=r;for(;s[o+1]==="**";)o++;o>r&&s.splice(r+1,o-r);let h=s[r+1],a=s[r+2],l=s[r+3];if(h!==".."||!a||a==="."||a===".."||!l||l==="."||l==="..")continue;e=!0,s.splice(r,1);let c=s.slice(0);c[r]="**",t.push(c),r--}if(!this.preserveMultipleSlashes){for(let o=1;o<s.length-1;o++){let h=s[o];o===1&&h===""&&s[0]===""||(h==="."||h==="")&&(e=!0,s.splice(o,1),o--)}s[0]==="."&&s.length===2&&(s[1]==="."||s[1]==="")&&(e=!0,s.pop())}let n=0;for(;(n=s.indexOf("..",n+1))!==-1;){let o=s[n-1];if(o&&o!=="."&&o!==".."&&o!=="**"){e=!0;let a=n===1&&s[n+1]==="**"?["."]:[];s.splice(n-1,2,...a),s.length===0&&s.push(""),n-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let s=e+1;s<t.length;s++){let r=this.partsMatch(t[e],t[s],!this.preserveMultipleSlashes);r&&(t[e]=r,t[s]=[])}return t.filter(e=>e.length)}partsMatch(t,e,s=!1){let r=0,n=0,o=[],h="";for(;r<t.length&&n<e.length;)if(t[r]===e[n])o.push(h==="b"?e[n]:t[r]),r++,n++;else if(s&&t[r]==="**"&&e[n]===t[r+1])o.push(t[r]),r++;else if(s&&e[n]==="**"&&t[r]===e[n+1])o.push(e[n]),n++;else if(t[r]==="*"&&e[n]&&(this.options.dot||!e[n].startsWith("."))&&e[n]!=="**"){if(h==="b")return!1;h="a",o.push(t[r]),r++,n++}else if(e[n]==="*"&&t[r]&&(this.options.dot||!t[r].startsWith("."))&&t[r]!=="**"){if(h==="a")return!1;h="b",o.push(e[n]),r++,n++}else return!1;return t.length===e.length&&o}parseNegate(){if(this.nonegate)return;let t=this.pattern,e=!1,s=0;for(let r=0;r<t.length&&t.charAt(r)==="!";r++)e=!e,s++;s&&(this.pattern=t.slice(s)),this.negate=e}matchOne(t,e,s=!1){let r=this.options;if(this.isWindows){let d=t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),y=e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]);if(d&&y){let g=t[3],S=e[3];g.toLowerCase()===S.toLowerCase()&&(t[3]=S)}else if(y&&typeof t[0]=="string"){let g=e[3],S=t[0];g.toLowerCase()===S.toLowerCase()&&(e[3]=S,e=e.slice(3))}else if(d&&typeof e[0]=="string"){let g=t[3];g.toLowerCase()===e[0].toLowerCase()&&(e[0]=g,t=t.slice(3))}}let{optimizationLevel:n=1}=this.options;n>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,h=0,a=t.length,l=e.length;o<a&&h<l;o++,h++){this.debug("matchOne loop");var c=e[h],u=t[o];if(this.debug(e,c,u),c===!1)return!1;if(c===U){this.debug("GLOBSTAR",[e,c,u]);var f=o,m=h+1;if(m===l){for(this.debug("** at the end");o<a;o++)if(t[o]==="."||t[o]===".."||!r.dot&&t[o].charAt(0)===".")return!1;return!0}for(;f<a;){var v=t[f];if(this.debug(`
globstar while`,t,f,e,m,v),this.matchOne(t.slice(f),e.slice(m),s))return this.debug("globstar found match!",f,a,v),!0;if(v==="."||v===".."||!r.dot&&v.charAt(0)==="."){this.debug("dot detected!",t,f,e,m);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(s&&(this.debug(`
>>> no match, partial?`,t,f,e,m),f===a))}let d;if(typeof c=="string"?(d=u===c,this.debug("string match",c,u,d)):(d=c.test(u),this.debug("pattern match",c,u,d)),!d)return!1}if(o===a&&h===l)return!0;if(o===a)return s;if(h===l)return o===a-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return Mr(this.pattern,this.options)}parse(t){ce(t);let e=this.options;if(t==="**")return U;if(t==="")return"";let s,r=null;(s=t.match(Ea))?r=e.dot?xa:_a:(s=t.match(fa))?r=(e.nocase?e.dot?ga:ma:e.dot?pa:da)(s[1]):(s=t.match(Oa))?r=(e.nocase?e.dot?Ra:Ta:e.dot?Aa:ka)(s):(s=t.match(wa))?r=e.dot?va:ya:(s=t.match(Sa))&&(r=ba);let n=Rt.fromGlob(t,this.options).toMMPattern();return r?Object.assign(n,{test:r}):n}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let t=this.set;if(!t.length)return this.regexp=!1,this.regexp;let e=this.options,s=e.noglobstar?Da:e.dot?Na:Ma,r=new Set(e.nocase?["i"]:[]),n=t.map(a=>{let l=a.map(c=>{if(c instanceof RegExp)for(let u of c.flags.split(""))r.add(u);return typeof c=="string"?Ia(c):c===U?U:c._src});return l.forEach((c,u)=>{let f=l[u+1],m=l[u-1];c!==U||m===U||(m===void 0?f!==void 0&&f!==U?l[u+1]="(?:\\/|"+s+"\\/)?"+f:l[u]=s:f===void 0?l[u-1]=m+"(?:\\/|"+s+")?":f!==U&&(l[u-1]=m+"(?:\\/|\\/"+s+"\\/)"+f,l[u+1]=U))}),l.filter(c=>c!==U).join("/")}).join("|"),[o,h]=t.length>1?["(?:",")"]:["",""];n="^"+o+n+h+"$",this.negate&&(n="^(?!"+n+").+$");try{this.regexp=new RegExp(n,[...r].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;let s=this.options;this.isWindows&&(t=t.split("\\").join("/"));let r=this.slashSplit(t);this.debug(this.pattern,"split",r);let n=this.set;this.debug(this.pattern,"set",n);let o=r[r.length-1];if(!o)for(let h=r.length-2;!o&&h>=0;h--)o=r[h];for(let h=0;h<n.length;h++){let a=n[h],l=r;if(s.matchBase&&a.length===1&&(l=[o]),this.matchOne(l,a,e))return s.flipNegate?!0:!this.negate}return s.flipNegate?!1:this.negate}static defaults(t){return q.defaults(t).Minimatch}};q.AST=Rt;q.Minimatch=H;q.escape=Kt;q.unescape=rt;var de=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Lr=new Set,Fs=typeof process=="object"&&process?process:{},Ur=(i,t,e,s)=>{typeof Fs.emitWarning=="function"?Fs.emitWarning(i,t,e,s):console.error(`[${e}] ${t}: ${i}`)},We=globalThis.AbortController,Fr=globalThis.AbortSignal;if(typeof We>"u"){Fr=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(s,r){this._onabort.push(r)}},We=class{constructor(){t()}signal=new Fr;abort(s){if(!this.signal.aborted){this.signal.reason=s,this.signal.aborted=!0;for(let r of this.signal._onabort)r(s);this.signal.onabort?.(s)}}};let i=Fs.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{i&&(i=!1,Ur("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var Ba=i=>!Lr.has(i),Al=Symbol("type"),At=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),jr=i=>At(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?Xt:null:null,Xt=class extends Array{constructor(t){super(t),this.fill(0)}},Qt,Yt=class{heap;length;static create(t){let e=jr(t);if(!e)return[];x(Yt,Qt,!0);let s=new Yt(t,e);return x(Yt,Qt,!1),s}constructor(t,e){if(!p(Yt,Qt))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},qe=Yt;Qt=new WeakMap,F(qe,Qt,!1);var Ft=class{#e;#r;#i;#o;#u;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#d;#h;#n;#t;#g;#y;#m;#f;#_;#p;#A;#k;#x;#v;#T;#c;static unsafeExposeInternals(t){return{starts:t.#k,ttls:t.#x,sizes:t.#A,keyMap:t.#h,keyList:t.#n,valList:t.#t,next:t.#g,prev:t.#y,get head(){return t.#m},get tail(){return t.#f},free:t.#_,isBackgroundFetch:e=>t.#a(e),backgroundFetch:(e,s,r,n)=>t.#M(e,s,r,n),moveToTail:e=>t.#N(e),indexes:e=>t.#E(e),rindexes:e=>t.#R(e),isStale:e=>t.#w(e)}}get max(){return this.#e}get maxSize(){return this.#r}get calculatedSize(){return this.#d}get size(){return this.#l}get fetchMethod(){return this.#u}get dispose(){return this.#i}get disposeAfter(){return this.#o}constructor(t){let{max:e=0,ttl:s,ttlResolution:r=1,ttlAutopurge:n,updateAgeOnGet:o,updateAgeOnHas:h,allowStale:a,dispose:l,disposeAfter:c,noDisposeOnSet:u,noUpdateTTL:f,maxSize:m=0,maxEntrySize:v=0,sizeCalculation:d,fetchMethod:y,noDeleteOnFetchRejection:g,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:_,allowStaleOnFetchAbort:b,ignoreFetchAbort:T}=t;if(e!==0&&!At(e))throw new TypeError("max option must be a nonnegative integer");let D=e?jr(e):Array;if(!D)throw new Error("invalid max value: "+e);if(this.#e=e,this.#r=m,this.maxEntrySize=v||this.#r,this.sizeCalculation=d,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(y!==void 0&&typeof y!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#u=y,this.#T=!!y,this.#h=new Map,this.#n=new Array(e).fill(void 0),this.#t=new Array(e).fill(void 0),this.#g=new D(e),this.#y=new D(e),this.#m=0,this.#f=0,this.#_=qe.create(e),this.#l=0,this.#d=0,typeof l=="function"&&(this.#i=l),typeof c=="function"?(this.#o=c,this.#p=[]):(this.#o=void 0,this.#p=void 0),this.#v=!!this.#i,this.#c=!!this.#o,this.noDisposeOnSet=!!u,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!g,this.allowStaleOnFetchRejection=!!_,this.allowStaleOnFetchAbort=!!b,this.ignoreFetchAbort=!!T,this.maxEntrySize!==0){if(this.#r!==0&&!At(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!At(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#C()}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!h,this.ttlResolution=At(r)||r===0?r:1,this.ttlAutopurge=!!n,this.ttl=s||0,this.ttl){if(!At(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#r===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#r){let st="LRU_CACHE_UNBOUNDED";Ba(st)&&(Lr.add(st),Ur("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",st,Ft))}}getRemainingTTL(t){return this.#h.has(t)?1/0:0}#P(){let t=new Xt(this.#e),e=new Xt(this.#e);this.#x=t,this.#k=e,this.#s=(n,o,h=de.now())=>{if(e[n]=o!==0?h:0,t[n]=o,o!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.#w(n)&&this.delete(this.#n[n])},o+1);a.unref&&a.unref()}},this.#O=n=>{e[n]=t[n]!==0?de.now():0},this.#S=(n,o)=>{if(t[o]){let h=t[o],a=e[o];n.ttl=h,n.start=a,n.now=s||r();let l=n.now-a;n.remainingTTL=h-l}};let s=0,r=()=>{let n=de.now();if(this.ttlResolution>0){s=n;let o=setTimeout(()=>s=0,this.ttlResolution);o.unref&&o.unref()}return n};this.getRemainingTTL=n=>{let o=this.#h.get(n);if(o===void 0)return 0;let h=t[o],a=e[o];if(h===0||a===0)return 1/0;let l=(s||r())-a;return h-l},this.#w=n=>t[n]!==0&&e[n]!==0&&(s||r())-e[n]>t[n]}#O=()=>{};#S=()=>{};#s=()=>{};#w=()=>!1;#C(){let t=new Xt(this.#e);this.#d=0,this.#A=t,this.#b=e=>{this.#d-=t[e],t[e]=0},this.#L=(e,s,r,n)=>{if(this.#a(s))return 0;if(!At(r))if(n){if(typeof n!="function")throw new TypeError("sizeCalculation must be a function");if(r=n(s,e),!At(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r},this.#F=(e,s,r)=>{if(t[e]=s,this.#r){let n=this.#r-t[e];for(;this.#d>n;)this.#D(!0)}this.#d+=t[e],r&&(r.entrySize=s,r.totalCalculatedSize=this.#d)}}#b=t=>{};#F=(t,e,s)=>{};#L=(t,e,s,r)=>{if(s||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:t=this.allowStale}={}){if(this.#l)for(let e=this.#f;!(!this.#U(e)||((t||!this.#w(e))&&(yield e),e===this.#m));)e=this.#y[e]}*#R({allowStale:t=this.allowStale}={}){if(this.#l)for(let e=this.#m;!(!this.#U(e)||((t||!this.#w(e))&&(yield e),e===this.#f));)e=this.#g[e]}#U(t){return t!==void 0&&this.#h.get(this.#n[t])===t}*entries(){for(let t of this.#E())this.#t[t]!==void 0&&this.#n[t]!==void 0&&!this.#a(this.#t[t])&&(yield[this.#n[t],this.#t[t]])}*rentries(){for(let t of this.#R())this.#t[t]!==void 0&&this.#n[t]!==void 0&&!this.#a(this.#t[t])&&(yield[this.#n[t],this.#t[t]])}*keys(){for(let t of this.#E()){let e=this.#n[t];e!==void 0&&!this.#a(this.#t[t])&&(yield e)}}*rkeys(){for(let t of this.#R()){let e=this.#n[t];e!==void 0&&!this.#a(this.#t[t])&&(yield e)}}*values(){for(let t of this.#E())this.#t[t]!==void 0&&!this.#a(this.#t[t])&&(yield this.#t[t])}*rvalues(){for(let t of this.#R())this.#t[t]!==void 0&&!this.#a(this.#t[t])&&(yield this.#t[t])}[Symbol.iterator](){return this.entries()}find(t,e={}){for(let s of this.#E()){let r=this.#t[s],n=this.#a(r)?r.__staleWhileFetching:r;if(n!==void 0&&t(n,this.#n[s],this))return this.get(this.#n[s],e)}}forEach(t,e=this){for(let s of this.#E()){let r=this.#t[s],n=this.#a(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.#n[s],this)}}rforEach(t,e=this){for(let s of this.#R()){let r=this.#t[s],n=this.#a(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.#n[s],this)}}purgeStale(){let t=!1;for(let e of this.#R({allowStale:!0}))this.#w(e)&&(this.delete(this.#n[e]),t=!0);return t}dump(){let t=[];for(let e of this.#E({allowStale:!0})){let s=this.#n[e],r=this.#t[e],n=this.#a(r)?r.__staleWhileFetching:r;if(n===void 0||s===void 0)continue;let o={value:n};if(this.#x&&this.#k){o.ttl=this.#x[e];let h=de.now()-this.#k[e];o.start=Math.floor(Date.now()-h)}this.#A&&(o.size=this.#A[e]),t.unshift([s,o])}return t}load(t){this.clear();for(let[e,s]of t){if(s.start){let r=Date.now()-s.start;s.start=de.now()-r}this.set(e,s.value,s)}}set(t,e,s={}){if(e===void 0)return this.delete(t),this;let{ttl:r=this.ttl,start:n,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:h=this.sizeCalculation,status:a}=s,{noUpdateTTL:l=this.noUpdateTTL}=s,c=this.#L(t,e,s.size||0,h);if(this.maxEntrySize&&c>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.delete(t),this;let u=this.#l===0?void 0:this.#h.get(t);if(u===void 0)u=this.#l===0?this.#f:this.#_.length!==0?this.#_.pop():this.#l===this.#e?this.#D(!1):this.#l,this.#n[u]=t,this.#t[u]=e,this.#h.set(t,u),this.#g[this.#f]=u,this.#y[u]=this.#f,this.#f=u,this.#l++,this.#F(u,c,a),a&&(a.set="add"),l=!1;else{this.#N(u);let f=this.#t[u];if(e!==f){if(this.#T&&this.#a(f)?f.__abortController.abort(new Error("replaced")):o||(this.#v&&this.#i?.(f,t,"set"),this.#c&&this.#p?.push([f,t,"set"])),this.#b(u),this.#F(u,c,a),this.#t[u]=e,a){a.set="replace";let m=f&&this.#a(f)?f.__staleWhileFetching:f;m!==void 0&&(a.oldValue=m)}}else a&&(a.set="update")}if(r!==0&&!this.#x&&this.#P(),this.#x&&(l||this.#s(u,r,n),a&&this.#S(a,u)),!o&&this.#c&&this.#p){let f=this.#p,m;for(;m=f?.shift();)this.#o?.(...m)}return this}pop(){try{for(;this.#l;){let t=this.#t[this.#m];if(this.#D(!0),this.#a(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#c&&this.#p){let t=this.#p,e;for(;e=t?.shift();)this.#o?.(...e)}}}#D(t){let e=this.#m,s=this.#n[e],r=this.#t[e];return this.#T&&this.#a(r)?r.__abortController.abort(new Error("evicted")):(this.#v||this.#c)&&(this.#v&&this.#i?.(r,s,"evict"),this.#c&&this.#p?.push([r,s,"evict"])),this.#b(e),t&&(this.#n[e]=void 0,this.#t[e]=void 0,this.#_.push(e)),this.#l===1?(this.#m=this.#f=0,this.#_.length=0):this.#m=this.#g[e],this.#h.delete(s),this.#l--,e}has(t,e={}){let{updateAgeOnHas:s=this.updateAgeOnHas,status:r}=e,n=this.#h.get(t);if(n!==void 0){let o=this.#t[n];if(this.#a(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#w(n))r&&(r.has="stale",this.#S(r,n));else return s&&this.#O(n),r&&(r.has="hit",this.#S(r,n)),!0}else r&&(r.has="miss");return!1}peek(t,e={}){let{allowStale:s=this.allowStale}=e,r=this.#h.get(t);if(r!==void 0&&(s||!this.#w(r))){let n=this.#t[r];return this.#a(n)?n.__staleWhileFetching:n}}#M(t,e,s,r){let n=e===void 0?void 0:this.#t[e];if(this.#a(n))return n;let o=new We,{signal:h}=s;h?.addEventListener("abort",()=>o.abort(h.reason),{signal:o.signal});let a={signal:o.signal,options:s,context:r},l=(d,y=!1)=>{let{aborted:g}=o.signal,S=s.ignoreFetchAbort&&d!==void 0;if(s.status&&(g&&!y?(s.status.fetchAborted=!0,s.status.fetchError=o.signal.reason,S&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),g&&!S&&!y)return u(o.signal.reason);let _=m;return this.#t[e]===m&&(d===void 0?_.__staleWhileFetching?this.#t[e]=_.__staleWhileFetching:this.delete(t):(s.status&&(s.status.fetchUpdated=!0),this.set(t,d,a.options))),d},c=d=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=d),u(d)),u=d=>{let{aborted:y}=o.signal,g=y&&s.allowStaleOnFetchAbort,S=g||s.allowStaleOnFetchRejection,_=S||s.noDeleteOnFetchRejection,b=m;if(this.#t[e]===m&&(!_||b.__staleWhileFetching===void 0?this.delete(t):g||(this.#t[e]=b.__staleWhileFetching)),S)return s.status&&b.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),b.__staleWhileFetching;if(b.__returned===b)throw d},f=(d,y)=>{let g=this.#u?.(t,n,a);g&&g instanceof Promise&&g.then(S=>d(S),y),o.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(d(),s.allowStaleOnFetchAbort&&(d=S=>l(S,!0)))})};s.status&&(s.status.fetchDispatched=!0);let m=new Promise(f).then(l,c),v=Object.assign(m,{__abortController:o,__staleWhileFetching:n,__returned:void 0});return e===void 0?(this.set(t,v,{...a.options,status:void 0}),e=this.#h.get(t)):this.#t[e]=v,v}#a(t){if(!this.#T)return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof We}async fetch(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:h=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:m=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:d,forceRefresh:y=!1,status:g,signal:S}=e;if(!this.#T)return g&&(g.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:r,noDeleteOnStaleGet:n,status:g});let _={allowStale:s,updateAgeOnGet:r,noDeleteOnStaleGet:n,ttl:o,noDisposeOnSet:h,size:a,sizeCalculation:l,noUpdateTTL:c,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:v,ignoreFetchAbort:m,status:g,signal:S},b=this.#h.get(t);if(b===void 0){g&&(g.fetch="miss");let T=this.#M(t,b,_,d);return T.__returned=T}else{let T=this.#t[b];if(this.#a(T)){let Ae=s&&T.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",Ae&&(g.returnedStale=!0)),Ae?T.__staleWhileFetching:T.__returned=T}let D=this.#w(b);if(!y&&!D)return g&&(g.fetch="hit"),this.#N(b),r&&this.#O(b),g&&this.#S(g,b),T;let st=this.#M(t,b,_,d),at=st.__staleWhileFetching!==void 0&&s;return g&&(g.fetch=D?"stale":"refresh",at&&D&&(g.returnedStale=!0)),at?st.__staleWhileFetching:st.__returned=st}}get(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:o}=e,h=this.#h.get(t);if(h!==void 0){let a=this.#t[h],l=this.#a(a);return o&&this.#S(o,h),this.#w(h)?(o&&(o.get="stale"),l?(o&&s&&a.__staleWhileFetching!==void 0&&(o.returnedStale=!0),s?a.__staleWhileFetching:void 0):(n||this.delete(t),o&&s&&(o.returnedStale=!0),s?a:void 0)):(o&&(o.get="hit"),l?a.__staleWhileFetching:(this.#N(h),r&&this.#O(h),a))}else o&&(o.get="miss")}#j(t,e){this.#y[e]=t,this.#g[t]=e}#N(t){t!==this.#f&&(t===this.#m?this.#m=this.#g[t]:this.#j(this.#y[t],this.#g[t]),this.#j(this.#f,t),this.#f=t)}delete(t){let e=!1;if(this.#l!==0){let s=this.#h.get(t);if(s!==void 0)if(e=!0,this.#l===1)this.clear();else{this.#b(s);let r=this.#t[s];this.#a(r)?r.__abortController.abort(new Error("deleted")):(this.#v||this.#c)&&(this.#v&&this.#i?.(r,t,"delete"),this.#c&&this.#p?.push([r,t,"delete"])),this.#h.delete(t),this.#n[s]=void 0,this.#t[s]=void 0,s===this.#f?this.#f=this.#y[s]:s===this.#m?this.#m=this.#g[s]:(this.#g[this.#y[s]]=this.#g[s],this.#y[this.#g[s]]=this.#y[s]),this.#l--,this.#_.push(s)}}if(this.#c&&this.#p?.length){let s=this.#p,r;for(;r=s?.shift();)this.#o?.(...r)}return e}clear(){for(let t of this.#R({allowStale:!0})){let e=this.#t[t];if(this.#a(e))e.__abortController.abort(new Error("deleted"));else{let s=this.#n[t];this.#v&&this.#i?.(e,s,"delete"),this.#c&&this.#p?.push([e,s,"delete"])}}if(this.#h.clear(),this.#t.fill(void 0),this.#n.fill(void 0),this.#x&&this.#k&&(this.#x.fill(0),this.#k.fill(0)),this.#A&&this.#A.fill(0),this.#m=0,this.#f=0,this.#_.length=0,this.#d=0,this.#l=0,this.#c&&this.#p){let t=this.#p,e;for(;e=t?.shift();)this.#o?.(...e)}}};var te=require("path"),Zr=require("url"),za=ht(require("fs"),1),ft=require("fs"),Pt=require("fs/promises");var Jr=ht(require("events"),1),qs=ht(require("stream"),1),Vr=ht(require("string_decoder"),1),Ir=typeof process=="object"&&process?process:{stdout:null,stderr:null},Br=Vr.default.StringDecoder,mt=Symbol("EOF"),gt=Symbol("maybeEmitEnd"),kt=Symbol("emittedEnd"),ze=Symbol("emittingEnd"),pe=Symbol("emittedError"),Ge=Symbol("closed"),$r=Symbol("read"),Je=Symbol("flush"),qr=Symbol("flushChunk"),V=Symbol("encoding"),wt=Symbol("decoder"),Ve=Symbol("flowing"),me=Symbol("paused"),Zt=Symbol("resume"),R=Symbol("buffer"),ct=Symbol("pipes"),M=Symbol("bufferLength"),Ls=Symbol("bufferPush"),Us=Symbol("bufferShift"),j=Symbol("objectMode"),A=Symbol("destroyed"),js=Symbol("error"),Is=Symbol("emitData"),Wr=Symbol("emitEnd"),Bs=Symbol("emitEnd2"),yt=Symbol("async"),$s=Symbol("abort"),He=Symbol("aborted"),Lt=Symbol("signal"),ge=i=>Promise.resolve().then(i),Hr=global._MP_NO_ITERATOR_SYMBOLS_!=="1",zr=Hr&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Gr=Hr&&Symbol.iterator||Symbol("iterator not implemented"),$a=i=>i==="end"||i==="finish"||i==="prefinish",qa=i=>i instanceof ArrayBuffer||typeof i=="object"&&i.constructor&&i.constructor.name==="ArrayBuffer"&&i.byteLength>=0,Wa=i=>!Buffer.isBuffer(i)&&ArrayBuffer.isView(i),Ke=class{constructor(t,e,s){this.src=t,this.dest=e,this.opts=s,this.ondrain=()=>t[Zt](),e.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Ws=class extends Ke{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,s){super(t,e,s),this.proxyErrors=r=>e.emit("error",r),t.on("error",this.proxyErrors)}},vt=class extends qs.default{constructor(t){super(),this[Ve]=!1,this[me]=!1,this[ct]=[],this[R]=[],this[j]=t&&t.objectMode||!1,this[j]?this[V]=null:this[V]=t&&t.encoding||null,this[V]==="buffer"&&(this[V]=null),this[yt]=t&&!!t.async||!1,this[wt]=this[V]?new Br(this[V]):null,this[mt]=!1,this[kt]=!1,this[ze]=!1,this[Ge]=!1,this[pe]=null,this.writable=!0,this.readable=!0,this[M]=0,this[A]=!1,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[R]}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ct]}),this[Lt]=t&&t.signal,this[He]=!1,this[Lt]&&(this[Lt].addEventListener("abort",()=>this[$s]()),this[Lt].aborted&&this[$s]())}get bufferLength(){return this[M]}get encoding(){return this[V]}set encoding(t){if(this[j])throw new Error("cannot set encoding in objectMode");if(this[V]&&t!==this[V]&&(this[wt]&&this[wt].lastNeed||this[M]))throw new Error("cannot change encoding");this[V]!==t&&(this[wt]=t?new Br(t):null,this[R].length&&(this[R]=this[R].map(e=>this[wt].write(e)))),this[V]=t}setEncoding(t){this.encoding=t}get objectMode(){return this[j]}set objectMode(t){this[j]=this[j]||!!t}get async(){return this[yt]}set async(t){this[yt]=this[yt]||!!t}[$s](){this[He]=!0,this.emit("abort",this[Lt].reason),this.destroy(this[Lt].reason)}get aborted(){return this[He]}set aborted(t){}write(t,e,s){if(this[He])return!1;if(this[mt])throw new Error("write after end");if(this[A])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof e=="function"&&(s=e,e="utf8"),e||(e="utf8");let r=this[yt]?ge:n=>n();return!this[j]&&!Buffer.isBuffer(t)&&(Wa(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):qa(t)?t=Buffer.from(t):typeof t!="string"&&(this.objectMode=!0)),this[j]?(this.flowing&&this[M]!==0&&this[Je](!0),this.flowing?this.emit("data",t):this[Ls](t),this[M]!==0&&this.emit("readable"),s&&r(s),this.flowing):t.length?(typeof t=="string"&&!(e===this[V]&&!this[wt].lastNeed)&&(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[V]&&(t=this[wt].write(t)),this.flowing&&this[M]!==0&&this[Je](!0),this.flowing?this.emit("data",t):this[Ls](t),this[M]!==0&&this.emit("readable"),s&&r(s),this.flowing):(this[M]!==0&&this.emit("readable"),s&&r(s),this.flowing)}read(t){if(this[A])return null;if(this[M]===0||t===0||t>this[M])return this[gt](),null;this[j]&&(t=null),this[R].length>1&&!this[j]&&(this.encoding?this[R]=[this[R].join("")]:this[R]=[Buffer.concat(this[R],this[M])]);let e=this[$r](t||null,this[R][0]);return this[gt](),e}[$r](t,e){return t===e.length||t===null?this[Us]():(this[R][0]=e.slice(t),e=e.slice(0,t),this[M]-=t),this.emit("data",e),!this[R].length&&!this[mt]&&this.emit("drain"),e}end(t,e,s){return typeof t=="function"&&(s=t,t=null),typeof e=="function"&&(s=e,e="utf8"),t&&this.write(t,e),s&&this.once("end",s),this[mt]=!0,this.writable=!1,(this.flowing||!this[me])&&this[gt](),this}[Zt](){this[A]||(this[me]=!1,this[Ve]=!0,this.emit("resume"),this[R].length?this[Je]():this[mt]?this[gt]():this.emit("drain"))}resume(){return this[Zt]()}pause(){this[Ve]=!1,this[me]=!0}get destroyed(){return this[A]}get flowing(){return this[Ve]}get paused(){return this[me]}[Ls](t){this[j]?this[M]+=1:this[M]+=t.length,this[R].push(t)}[Us](){return this[j]?this[M]-=1:this[M]-=this[R][0].length,this[R].shift()}[Je](t){do;while(this[qr](this[Us]())&&this[R].length);!t&&!this[R].length&&!this[mt]&&this.emit("drain")}[qr](t){return this.emit("data",t),this.flowing}pipe(t,e){if(this[A])return;let s=this[kt];return e=e||{},t===Ir.stdout||t===Ir.stderr?e.end=!1:e.end=e.end!==!1,e.proxyErrors=!!e.proxyErrors,s?e.end&&t.end():(this[ct].push(e.proxyErrors?new Ws(this,t,e):new Ke(this,t,e)),this[yt]?ge(()=>this[Zt]()):this[Zt]()),t}unpipe(t){let e=this[ct].find(s=>s.dest===t);e&&(this[ct].splice(this[ct].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){let s=super.on(t,e);return t==="data"&&!this[ct].length&&!this.flowing?this[Zt]():t==="readable"&&this[M]!==0?super.emit("readable"):$a(t)&&this[kt]?(super.emit(t),this.removeAllListeners(t)):t==="error"&&this[pe]&&(this[yt]?ge(()=>e.call(this,this[pe])):e.call(this,this[pe])),s}get emittedEnd(){return this[kt]}[gt](){!this[ze]&&!this[kt]&&!this[A]&&this[R].length===0&&this[mt]&&(this[ze]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ge]&&this.emit("close"),this[ze]=!1)}emit(t,e,...s){if(t!=="error"&&t!=="close"&&t!==A&&this[A])return;if(t==="data")return!this[j]&&!e?!1:this[yt]?ge(()=>this[Is](e)):this[Is](e);if(t==="end")return this[Wr]();if(t==="close"){if(this[Ge]=!0,!this[kt]&&!this[A])return;let n=super.emit("close");return this.removeAllListeners("close"),n}else if(t==="error"){this[pe]=e,super.emit(js,e);let n=!this[Lt]||this.listeners("error").length?super.emit("error",e):!1;return this[gt](),n}else if(t==="resume"){let n=super.emit("resume");return this[gt](),n}else if(t==="finish"||t==="prefinish"){let n=super.emit(t);return this.removeAllListeners(t),n}let r=super.emit(t,e,...s);return this[gt](),r}[Is](t){for(let s of this[ct])s.dest.write(t)===!1&&this.pause();let e=super.emit("data",t);return this[gt](),e}[Wr](){this[kt]||(this[kt]=!0,this.readable=!1,this[yt]?ge(()=>this[Bs]()):this[Bs]())}[Bs](){if(this[wt]){let e=this[wt].end();if(e){for(let s of this[ct])s.dest.write(e);super.emit("data",e)}}for(let e of this[ct])e.end();let t=super.emit("end");return this.removeAllListeners("end"),t}collect(){let t=[];this[j]||(t.dataLength=0);let e=this.promise();return this.on("data",s=>{t.push(s),this[j]||(t.dataLength+=s.length)}),e.then(()=>t)}concat(){return this[j]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(t=>this[j]?Promise.reject(new Error("cannot concat in objectMode")):this[V]?t.join(""):Buffer.concat(t,t.dataLength))}promise(){return new Promise((t,e)=>{this.on(A,()=>e(new Error("stream destroyed"))),this.on("error",s=>e(s)),this.on("end",()=>t())})}[zr](){let t=!1,e=()=>(this.pause(),t=!0,Promise.resolve({done:!0}));return{next:()=>{if(t)return e();let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[mt])return e();let n=null,o=null,h=u=>{this.removeListener("data",a),this.removeListener("end",l),this.removeListener(A,c),e(),o(u)},a=u=>{this.removeListener("error",h),this.removeListener("end",l),this.removeListener(A,c),this.pause(),n({value:u,done:!!this[mt]})},l=()=>{this.removeListener("error",h),this.removeListener("data",a),this.removeListener(A,c),e(),n({done:!0})},c=()=>h(new Error("stream destroyed"));return new Promise((u,f)=>{o=f,n=u,this.once(A,c),this.once("error",h),this.once("end",l),this.once("data",a)})},throw:e,return:e,[zr](){return this}}}[Gr](){let t=!1,e=()=>(this.pause(),this.removeListener(js,e),this.removeListener(A,e),this.removeListener("end",e),t=!0,{done:!0}),s=()=>{if(t)return e();let r=this.read();return r===null?e():{value:r}};return this.once("end",e),this.once(js,e),this.once(A,e),{next:s,throw:e,return:e,[Gr](){return this}}}destroy(t){return this[A]?(t?this.emit("error",t):this.emit(A),this):(this[A]=!0,this[R].length=0,this[M]=0,typeof this.close=="function"&&!this[Ge]&&this.close(),t?this.emit("error",t):this.emit(A),this)}static isStream(t){return!!t&&(t instanceof vt||t instanceof qs.default||t instanceof Jr.default&&(typeof t.pipe=="function"||typeof t.write=="function"&&typeof t.end=="function"))}};var Ga=ft.realpathSync.native,ye={lstatSync:ft.lstatSync,readdir:ft.readdir,readdirSync:ft.readdirSync,readlinkSync:ft.readlinkSync,realpathSync:Ga,promises:{lstat:Pt.lstat,readdir:Pt.readdir,readlink:Pt.readlink,realpath:Pt.realpath}},tn=i=>!i||i===ye||i===za?ye:{...ye,...i,promises:{...ye.promises,...i.promises||{}}},en=/^\\\\\?\\([a-z]:)\\?$/i,Ja=i=>i.replace(/\//g,"\\").replace(en,"$1\\"),Va=/[\\\/]/,et=0,sn=1,rn=2,ut=4,nn=6,on=8,Ut=10,an=12,tt=15,we=~tt,zs=16,Kr=32,ve=64,nt=128,Ye=256,Qe=512,Yr=ve|nt|Qe,Ha=1023,Gs=i=>i.isFile()?on:i.isDirectory()?ut:i.isSymbolicLink()?Ut:i.isCharacterDevice()?rn:i.isBlockDevice()?nn:i.isSocket()?an:i.isFIFO()?sn:et,Xr=new Map,Se=i=>{let t=Xr.get(i);if(t)return t;let e=i.normalize("NFKD");return Xr.set(i,e),e},Qr=new Map,Xe=i=>{let t=Qr.get(i);if(t)return t;let e=Se(i.toLowerCase());return Qr.set(i,e),e},Ze=class extends Ft{constructor(){super({max:256})}},Js=class extends Ft{constructor(t=16*1024){super({maxSize:t,sizeCalculation:e=>e.length+1})}},hn=Symbol("PathScurry setAsCwd"),I=class{name;root;roots;parent;nocase;#e;#r;get dev(){return this.#r}#i;get mode(){return this.#i}#o;get nlink(){return this.#o}#u;get uid(){return this.#u}#l;get gid(){return this.#l}#d;get rdev(){return this.#d}#h;get blksize(){return this.#h}#n;get ino(){return this.#n}#t;get size(){return this.#t}#g;get blocks(){return this.#g}#y;get atimeMs(){return this.#y}#m;get mtimeMs(){return this.#m}#f;get ctimeMs(){return this.#f}#_;get birthtimeMs(){return this.#_}#p;get atime(){return this.#p}#A;get mtime(){return this.#A}#k;get ctime(){return this.#k}#x;get birthtime(){return this.#x}#v;#T;#c;#P;#O;#S;#s;#w;#C;#b;constructor(t,e=et,s,r,n,o,h){this.name=t,this.#v=n?Xe(t):Se(t),this.#s=e&Ha,this.nocase=n,this.roots=r,this.root=s||this,this.#w=o,this.#c=h.fullpath,this.#O=h.relative,this.#S=h.relativePosix,this.parent=h.parent,this.parent?this.#e=this.parent.#e:this.#e=tn(h.fs)}depth(){return this.#T!==void 0?this.#T:this.parent?this.#T=this.parent.depth()+1:this.#T=0}childrenCache(){return this.#w}resolve(t){if(!t)return this;let e=this.getRootString(t),r=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#F(r):this.#F(r)}#F(t){let e=this;for(let s of t)e=e.child(s);return e}children(){let t=this.#w.get(this);if(t)return t;let e=Object.assign([],{provisional:0});return this.#w.set(this,e),this.#s&=~zs,e}child(t,e){if(t===""||t===".")return this;if(t==="..")return this.parent||this;let s=this.children(),r=this.nocase?Xe(t):Se(t);for(let a of s)if(a.#v===r)return a;let n=this.parent?this.sep:"",o=this.#c?this.#c+n+t:void 0,h=this.newChild(t,et,{...e,parent:this,fullpath:o});return this.canReaddir()||(h.#s|=nt),s.push(h),h}relative(){if(this.#O!==void 0)return this.#O;let t=this.name,e=this.parent;if(!e)return this.#O=this.name;let s=e.relative();return s+(!s||!e.parent?"":this.sep)+t}relativePosix(){if(this.sep==="/")return this.relative();if(this.#S!==void 0)return this.#S;let t=this.name,e=this.parent;if(!e)return this.#S=this.fullpathPosix();let s=e.relativePosix();return s+(!s||!e.parent?"":"/")+t}fullpath(){if(this.#c!==void 0)return this.#c;let t=this.name,e=this.parent;if(!e)return this.#c=this.name;let r=e.fullpath()+(e.parent?this.sep:"")+t;return this.#c=r}fullpathPosix(){if(this.#P!==void 0)return this.#P;if(this.sep==="/")return this.#P=this.fullpath();if(!this.parent){let r=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(r)?this.#P=`//?/${r}`:this.#P=r}let t=this.parent,e=t.fullpathPosix(),s=e+(!e||!t.parent?"":"/")+this.name;return this.#P=s}isUnknown(){return(this.#s&tt)===et}isFile(){return(this.#s&tt)===on}isDirectory(){return(this.#s&tt)===ut}isCharacterDevice(){return(this.#s&tt)===rn}isBlockDevice(){return(this.#s&tt)===nn}isFIFO(){return(this.#s&tt)===sn}isSocket(){return(this.#s&tt)===an}isSymbolicLink(){return(this.#s&Ut)===Ut}lstatCached(){return this.#s&Kr?this:void 0}readlinkCached(){return this.#C}realpathCached(){return this.#b}readdirCached(){let t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#C)return!0;if(!this.parent)return!1;let t=this.#s&tt;return!(t!==et&&t!==Ut||this.#s&Ye||this.#s&nt)}calledReaddir(){return!!(this.#s&zs)}isENOENT(){return!!(this.#s&nt)}isNamed(t){return this.nocase?this.#v===Xe(t):this.#v===Se(t)}async readlink(){let t=this.#C;if(t)return t;if(this.canReadlink()&&this.parent)try{let e=await this.#e.promises.readlink(this.fullpath()),s=this.parent.resolve(e);if(s)return this.#C=s}catch(e){this.#j(e.code);return}}readlinkSync(){let t=this.#C;if(t)return t;if(this.canReadlink()&&this.parent)try{let e=this.#e.readlinkSync(this.fullpath()),s=this.parent.resolve(e);if(s)return this.#C=s}catch(e){this.#j(e.code);return}}#L(t){this.#s|=zs;for(let e=t.provisional;e<t.length;e++)t[e].#E()}#E(){this.#s&nt||(this.#s=(this.#s|nt)&we,this.#R())}#R(){let t=this.children();t.provisional=0;for(let e of t)e.#E()}#U(){this.#s|=Qe,this.#D()}#D(){if(this.#s&ve)return;let t=this.#s;(t&tt)===ut&&(t&=we),this.#s=t|ve,this.#R()}#M(t=""){t==="ENOTDIR"||t==="EPERM"?this.#D():t==="ENOENT"?this.#E():this.children().provisional=0}#a(t=""){t==="ENOTDIR"?this.parent.#D():t==="ENOENT"&&this.#E()}#j(t=""){let e=this.#s;e|=Ye,t==="ENOENT"&&(e|=nt),(t==="EINVAL"||t==="UNKNOWN")&&(e&=we),this.#s=e,t==="ENOTDIR"&&this.parent&&this.parent.#D()}#N(t,e){return this.#z(t,e)||this.#W(t,e)}#W(t,e){let s=Gs(t),r=this.newChild(t.name,s,{parent:this}),n=r.#s&tt;return n!==ut&&n!==Ut&&n!==et&&(r.#s|=ve),e.unshift(r),e.provisional++,r}#z(t,e){for(let s=e.provisional;s<e.length;s++){let r=e[s];if((this.nocase?Xe(t.name):Se(t.name))===r.#v)return this.#G(t,r,s,e)}}#G(t,e,s,r){let n=e.name;return e.#s=e.#s&we|Gs(t),n!==t.name&&(e.name=t.name),s!==r.provisional&&(s===r.length-1?r.pop():r.splice(s,1),r.unshift(e)),r.provisional++,e}async lstat(){if(!(this.#s&nt))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(t){this.#a(t.code)}}lstatSync(){if(!(this.#s&nt))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(t){this.#a(t.code)}}#q(t){let{atime:e,atimeMs:s,birthtime:r,birthtimeMs:n,blksize:o,blocks:h,ctime:a,ctimeMs:l,dev:c,gid:u,ino:f,mode:m,mtime:v,mtimeMs:d,nlink:y,rdev:g,size:S,uid:_}=t;this.#p=e,this.#y=s,this.#x=r,this.#_=n,this.#h=o,this.#g=h,this.#k=a,this.#f=l,this.#r=c,this.#l=u,this.#n=f,this.#i=m,this.#A=v,this.#m=d,this.#o=y,this.#d=g,this.#t=S,this.#u=_;let b=Gs(t);this.#s=this.#s&we|b|Kr,b!==et&&b!==ut&&b!==Ut&&(this.#s|=ve)}#B=[];#$=!1;#J(t){this.#$=!1;let e=this.#B.slice();this.#B.length=0,e.forEach(s=>s(null,t))}readdirCB(t,e=!1){if(!this.canReaddir()){e?t(null,[]):queueMicrotask(()=>t(null,[]));return}let s=this.children();if(this.calledReaddir()){let n=s.slice(0,s.provisional);e?t(null,n):queueMicrotask(()=>t(null,n));return}if(this.#B.push(t),this.#$)return;this.#$=!0;let r=this.fullpath();this.#e.readdir(r,{withFileTypes:!0},(n,o)=>{if(n)this.#M(n.code),s.provisional=0;else{for(let h of o)this.#N(h,s);this.#L(s)}this.#J(s.slice(0,s.provisional))})}#I;async readdir(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();if(this.#I)await this.#I;else{let s=()=>{};this.#I=new Promise(r=>s=r);try{for(let r of await this.#e.promises.readdir(e,{withFileTypes:!0}))this.#N(r,t);this.#L(t)}catch(r){this.#M(r.code),t.provisional=0}this.#I=void 0,s()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];let t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);let e=this.fullpath();try{for(let s of this.#e.readdirSync(e,{withFileTypes:!0}))this.#N(s,t);this.#L(t)}catch(s){this.#M(s.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(this.#s&Yr)return!1;let t=tt&this.#s;return t===et||t===ut||t===Ut}shouldWalk(t,e){return(this.#s&ut)===ut&&!(this.#s&Yr)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#b)return this.#b;if(!((Qe|Ye|nt)&this.#s))try{let t=await this.#e.promises.realpath(this.fullpath());return this.#b=this.resolve(t)}catch{this.#U()}}realpathSync(){if(this.#b)return this.#b;if(!((Qe|Ye|nt)&this.#s))try{let t=this.#e.realpathSync(this.fullpath());return this.#b=this.resolve(t)}catch{this.#U()}}[hn](t){if(t===this)return;let e=new Set([]),s=[],r=this;for(;r&&r.parent;)e.add(r),r.#O=s.join(this.sep),r.#S=s.join("/"),r=r.parent,s.push("..");for(r=t;r&&r.parent&&!e.has(r);)r.#O=void 0,r.#S=void 0,r=r.parent}},ee=class extends I{sep="\\";splitSep=Va;constructor(t,e=et,s,r,n,o,h){super(t,e,s,r,n,o,h)}newChild(t,e=et,s={}){return new ee(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}getRootString(t){return te.win32.parse(t).root}getRoot(t){if(t=Ja(t.toUpperCase()),t===this.root.name)return this.root;for(let[e,s]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=s;return this.roots[t]=new ie(t,this).root}sameRoot(t,e=this.root.name){return t=t.toUpperCase().replace(/\//g,"\\").replace(en,"$1\\"),t===e}},se=class extends I{splitSep="/";sep="/";constructor(t,e=et,s,r,n,o,h){super(t,e,s,r,n,o,h)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=et,s={}){return new se(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}},ts=class{root;rootPath;roots;cwd;#e;#r;#i;nocase;#o;constructor(t=process.cwd(),e,s,{nocase:r,childrenCacheSize:n=16*1024,fs:o=ye}={}){this.#o=tn(o),(t instanceof URL||t.startsWith("file://"))&&(t=(0,Zr.fileURLToPath)(t));let h=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(h),this.#e=new Ze,this.#r=new Ze,this.#i=new Js(n);let a=h.substring(this.rootPath.length).split(s);if(a.length===1&&!a[0]&&a.pop(),r===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=r,this.root=this.newRoot(this.#o),this.roots[this.rootPath]=this.root;let l=this.root,c=a.length-1,u=e.sep,f=this.rootPath,m=!1;for(let v of a){let d=c--;l=l.child(v,{relative:new Array(d).fill("..").join(u),relativePosix:new Array(d).fill("..").join("/"),fullpath:f+=(m?"":u)+v}),m=!0}this.cwd=l}depth(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#i}resolve(...t){let e="";for(let n=t.length-1;n>=0;n--){let o=t[n];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let s=this.#e.get(e);if(s!==void 0)return s;let r=this.cwd.resolve(e).fullpath();return this.#e.set(e,r),r}resolvePosix(...t){let e="";for(let n=t.length-1;n>=0;n--){let o=t[n];if(!(!o||o===".")&&(e=e?`${o}/${e}`:o,this.isAbsolute(o)))break}let s=this.#r.get(e);if(s!==void 0)return s;let r=this.cwd.resolve(e).fullpathPosix();return this.#r.set(e,r),r}relative(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t,t=this.cwd);let{withFileTypes:s}=e;if(t.canReaddir()){let r=await t.readdir();return s?r:r.map(n=>n.name)}else return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t,t=this.cwd);let{withFileTypes:s=!0}=e;return t.canReaddir()?s?t.readdirSync():t.readdirSync().map(r=>r.name):[]}async lstat(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return typeof t=="string"&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t.withFileTypes,t=this.cwd);let s=await t.readlink();return e?s:s?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t.withFileTypes,t=this.cwd);let s=t.readlinkSync();return e?s:s?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t.withFileTypes,t=this.cwd);let s=await t.realpath();return e?s:s?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t.withFileTypes,t=this.cwd);let s=t.realpathSync();return e?s:s?.fullpath()}async walk(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:r=!1,filter:n,walkFilter:o}=e,h=[];(!n||n(t))&&h.push(s?t:t.fullpath());let a=new Set,l=(u,f)=>{a.add(u),u.readdirCB((m,v)=>{if(m)return f(m);let d=v.length;if(!d)return f();let y=()=>{--d===0&&f()};for(let g of v)(!n||n(g))&&h.push(s?g:g.fullpath()),r&&g.isSymbolicLink()?g.realpath().then(S=>S?.isUnknown()?S.lstat():S).then(S=>S?.shouldWalk(a,o)?l(S,y):y()):g.shouldWalk(a,o)?l(g,y):y()},!0)},c=t;return new Promise((u,f)=>{l(c,m=>{if(m)return f(m);u(h)})})}walkSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:r=!1,filter:n,walkFilter:o}=e,h=[];(!n||n(t))&&h.push(s?t:t.fullpath());let a=new Set([t]);for(let l of a){let c=l.readdirSync();for(let u of c){(!n||n(u))&&h.push(s?u:u.fullpath());let f=u;if(u.isSymbolicLink()){if(!(r&&(f=u.realpathSync())))continue;f.isUnknown()&&f.lstatSync()}f.shouldWalk(a,o)&&a.add(f)}}return h}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:r=!1,filter:n,walkFilter:o}=e;(!n||n(t))&&(yield s?t:t.fullpath());let h=new Set([t]);for(let a of h){let l=a.readdirSync();for(let c of l){(!n||n(c))&&(yield s?c:c.fullpath());let u=c;if(c.isSymbolicLink()){if(!(r&&(u=c.realpathSync())))continue;u.isUnknown()&&u.lstatSync()}u.shouldWalk(h,o)&&h.add(u)}}}stream(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:r=!1,filter:n,walkFilter:o}=e,h=new vt({objectMode:!0});(!n||n(t))&&h.write(s?t:t.fullpath());let a=new Set,l=[t],c=0,u=()=>{let f=!1;for(;!f;){let m=l.shift();if(!m){c===0&&h.end();return}c++,a.add(m);let v=(y,g,S=!1)=>{if(y)return h.emit("error",y);if(r&&!S){let _=[];for(let b of g)b.isSymbolicLink()&&_.push(b.realpath().then(T=>T?.isUnknown()?T.lstat():T));if(_.length){Promise.all(_).then(()=>v(null,g,!0));return}}for(let _ of g)_&&(!n||n(_))&&(h.write(s?_:_.fullpath())||(f=!0));c--;for(let _ of g){let b=_.realpathCached()||_;b.shouldWalk(a,o)&&l.push(b)}f&&!h.flowing?h.once("drain",u):d||u()},d=!0;m.readdirCB(v,!0),d=!1}};return u(),h}streamSync(t=this.cwd,e={}){typeof t=="string"?t=this.cwd.resolve(t):t instanceof I||(e=t,t=this.cwd);let{withFileTypes:s=!0,follow:r=!1,filter:n,walkFilter:o}=e,h=new vt({objectMode:!0}),a=new Set;(!n||n(t))&&h.write(s?t:t.fullpath());let l=[t],c=0,u=()=>{let f=!1;for(;!f;){let m=l.shift();if(!m){c===0&&h.end();return}c++,a.add(m);let v=m.readdirSync();for(let d of v)(!n||n(d))&&(h.write(s?d:d.fullpath())||(f=!0));c--;for(let d of v){let y=d;if(d.isSymbolicLink()){if(!(r&&(y=d.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(a,o)&&l.push(y)}}f&&!h.flowing&&h.once("drain",u)};return u(),h}chdir(t=this.cwd){let e=this.cwd;this.cwd=typeof t=="string"?this.cwd.resolve(t):t,this.cwd[hn](e)}},ie=class extends ts{sep="\\";constructor(t=process.cwd(),e={}){let{nocase:s=!0}=e;super(t,te.win32,"\\",{...e,nocase:s}),this.nocase=s;for(let r=this.cwd;r;r=r.parent)r.nocase=this.nocase}parseRootPath(t){return te.win32.parse(t).root.toUpperCase()}newRoot(t){return new ee(this.rootPath,ut,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}},re=class extends ts{sep="/";constructor(t=process.cwd(),e={}){let{nocase:s=!1}=e;super(t,te.posix,"/",{...e,nocase:s}),this.nocase=s}parseRootPath(t){return"/"}newRoot(t){return new se(this.rootPath,ut,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}},be=class extends re{constructor(t=process.cwd(),e={}){let{nocase:s=!0}=e;super(t,{...e,nocase:s})}},Ml=process.platform==="win32"?ee:se,ln=process.platform==="win32"?ie:process.platform==="darwin"?be:re;var cn=require("url");var Ka=i=>i.length>=1,Ya=i=>i.length>=1,Ct=class{#e;#r;#i;length;#o;#u;#l;#d;#h;#n;#t=!0;constructor(t,e,s,r){if(!Ka(t))throw new TypeError("empty pattern list");if(!Ya(e))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,s<0||s>=this.length)throw new TypeError("index out of range");if(this.#e=t,this.#r=e,this.#i=s,this.#o=r,this.#i===0){if(this.isUNC()){let[n,o,h,a,...l]=this.#e,[c,u,f,m,...v]=this.#r;l[0]===""&&(l.shift(),v.shift());let d=[n,o,h,a,""].join("/"),y=[c,u,f,m,""].join("/");this.#e=[d,...l],this.#r=[y,...v],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[n,...o]=this.#e,[h,...a]=this.#r;o[0]===""&&(o.shift(),a.shift());let l=n+"/",c=h+"/";this.#e=[l,...o],this.#r=[c,...a],this.length=this.#e.length}}}pattern(){return this.#e[this.#i]}isString(){return typeof this.#e[this.#i]=="string"}isGlobstar(){return this.#e[this.#i]===U}isRegExp(){return this.#e[this.#i]instanceof RegExp}globString(){return this.#l=this.#l||(this.#i===0?this.isAbsolute()?this.#r[0]+this.#r.slice(1).join("/"):this.#r.join("/"):this.#r.slice(this.#i).join("/"))}hasMore(){return this.length>this.#i+1}rest(){return this.#u!==void 0?this.#u:this.hasMore()?(this.#u=new Ct(this.#e,this.#r,this.#i+1,this.#o),this.#u.#n=this.#n,this.#u.#h=this.#h,this.#u.#d=this.#d,this.#u):this.#u=null}isUNC(){let t=this.#e;return this.#h!==void 0?this.#h:this.#h=this.#o==="win32"&&this.#i===0&&t[0]===""&&t[1]===""&&typeof t[2]=="string"&&!!t[2]&&typeof t[3]=="string"&&!!t[3]}isDrive(){let t=this.#e;return this.#d!==void 0?this.#d:this.#d=this.#o==="win32"&&this.#i===0&&this.length>1&&typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0])}isAbsolute(){let t=this.#e;return this.#n!==void 0?this.#n:this.#n=t[0]===""&&t.length>1||this.isDrive()||this.isUNC()}root(){let t=this.#e[0];return typeof t=="string"&&this.isAbsolute()&&this.#i===0?t:""}checkFollowGlobstar(){return!(this.#i===0||!this.isGlobstar()||!this.#t)}markFollowGlobstar(){return this.#i===0||!this.isGlobstar()||!this.#t?!1:(this.#t=!1,!0)}};var Xa=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Ee=class{relative;relativeChildren;absolute;absoluteChildren;constructor(t,{nobrace:e,nocase:s,noext:r,noglobstar:n,platform:o=Xa}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];let h={dot:!0,nobrace:e,nocase:s,noext:r,noglobstar:n,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of t){let l=new H(a,h);for(let c=0;c<l.set.length;c++){let u=l.set[c],f=l.globParts[c],m=new Ct(u,f,0,o),v=new H(m.globString(),h),d=f[f.length-1]==="**",y=m.isAbsolute();y?this.absolute.push(v):this.relative.push(v),d&&(y?this.absoluteChildren.push(v):this.relativeChildren.push(v))}}}ignored(t){let e=t.fullpath(),s=`${e}/`,r=t.relative()||".",n=`${r}/`;for(let o of this.relative)if(o.match(r)||o.match(n))return!0;for(let o of this.absolute)if(o.match(e)||o.match(s))return!0;return!1}childrenIgnored(t){let e=t.fullpath()+"/",s=(t.relative()||".")+"/";for(let r of this.relativeChildren)if(r.match(s))return!0;for(let r of this.absoluteChildren)r.match(e);return!1}};var _e=class{store;constructor(t=new Map){this.store=t}copy(){return new _e(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){let s=t.fullpath(),r=this.store.get(s);r?r.add(e.globString()):this.store.set(s,new Set([e.globString()]))}},Vs=class{store=new Map;add(t,e,s){let r=(e?2:0)|(s?1:0),n=this.store.get(t);this.store.set(t,n===void 0?r:r&n)}entries(){return[...this.store.entries()].map(([t,e])=>[t,!!(e&2),!!(e&1)])}},Hs=class{store=new Map;add(t,e){if(!t.canReaddir())return;let s=this.store.get(t);s?s.find(r=>r.globString()===e.globString())||s.push(e):this.store.set(t,[e])}get(t){let e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map(t=>[t,this.store.get(t)])}keys(){return[...this.store.keys()].filter(t=>t.canReaddir())}},jt=class{hasWalkedCache;matches=new Vs;subwalks=new Hs;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new _e}processPatterns(t,e){this.patterns=e;let s=e.map(r=>[t,r]);for(let[r,n]of s){this.hasWalkedCache.storeWalked(r,n);let o=n.root(),h=n.isAbsolute()&&this.opts.absolute!==!1;if(o){r=r.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let u=n.rest();if(u)n=u;else{this.matches.add(r,!0,!1);continue}}if(r.isENOENT())continue;let a,l,c=!1;for(;typeof(a=n.pattern())=="string"&&(l=n.rest());){let u=r.resolve(a);if(u.isUnknown()&&a!=="..")break;r=u,n=l,c=!0}if(a=n.pattern(),l=n.rest(),c){if(this.hasWalkedCache.hasWalked(r,n))continue;this.hasWalkedCache.storeWalked(r,n)}if(typeof a=="string"){if(l)this.subwalks.add(r,n);else{let u=a===".."||a===""||a===".";this.matches.add(r.resolve(a),h,u)}continue}else if(a===U){(!r.isSymbolicLink()||this.follow||n.checkFollowGlobstar())&&this.subwalks.add(r,n);let u=l?.pattern(),f=l?.rest();if(!l||(u===""||u===".")&&!f)this.matches.add(r,h,u===""||u===".");else if(u===".."){let m=r.parent||r;f?this.hasWalkedCache.hasWalked(m,f)||this.subwalks.add(m,f):this.matches.add(m,h,!0)}}else a instanceof RegExp&&this.subwalks.add(r,n)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new jt(this.opts,this.hasWalkedCache)}filterEntries(t,e){let s=this.subwalks.get(t),r=this.child();for(let n of e)for(let o of s){let h=o.isAbsolute(),a=o.pattern(),l=o.rest();a===U?r.testGlobstar(n,o,l,h):a instanceof RegExp?r.testRegExp(n,a,l,h):r.testString(n,a,l,h)}return r}testGlobstar(t,e,s,r){if((this.dot||!t.name.startsWith("."))&&(e.hasMore()||this.matches.add(t,r,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(s&&e.checkFollowGlobstar()?this.subwalks.add(t,s):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),s){let n=s.pattern();if(typeof n=="string"&&n!==".."&&n!==""&&n!==".")this.testString(t,n,s.rest(),r);else if(n===".."){let o=t.parent||t;this.subwalks.add(o,s)}else n instanceof RegExp&&this.testRegExp(t,n,s.rest(),r)}}testRegExp(t,e,s,r){e.test(t.name)&&(s?this.subwalks.add(t,s):this.matches.add(t,r,!1))}testString(t,e,s,r){t.isNamed(e)&&(s?this.subwalks.add(t,s):this.matches.add(t,r,!1))}};var Qa=(i,t)=>typeof i=="string"?new Ee([i],t):Array.isArray(i)?new Ee(i,t):i,es=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#r;#i;signal;maxDepth;constructor(t,e,s){this.patterns=t,this.path=e,this.opts=s,this.#i=!s.posix&&s.platform==="win32"?"\\":"/",s.ignore&&(this.#r=Qa(s.ignore,s)),this.maxDepth=s.maxDepth||1/0,s.signal&&(this.signal=s.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#o(t){return this.seen.has(t)||!!this.#r?.ignored?.(t)}#u(t){return!!this.#r?.childrenIgnored?.(t)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let t;for(;!this.paused&&(t=this.#e.shift());)t()}onResume(t){this.signal?.aborted||(this.paused?this.#e.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||await t.realpath(),!s)return;t=s}let r=t.isUnknown()||this.opts.stat;return this.matchCheckTest(r?await t.lstat():t,e)}matchCheckTest(t,e){return t&&(this.maxDepth===1/0||t.depth()<=this.maxDepth)&&(!e||t.canReaddir())&&(!this.opts.nodir||!t.isDirectory())&&!this.#o(t)?t:void 0}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||t.realpathSync(),!s)return;t=s}let r=t.isUnknown()||this.opts.stat;return this.matchCheckTest(r?t.lstatSync():t,e)}matchFinish(t,e){if(this.#o(t))return;let s=this.opts.absolute===void 0?e:this.opts.absolute;this.seen.add(t);let r=this.opts.mark&&t.isDirectory()?this.#i:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(s){let n=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(n+r)}else{let n=this.opts.posix?t.relativePosix():t.relative(),o=this.opts.dotRelative&&!n.startsWith(".."+this.#i)?"."+this.#i:"";this.matchEmit(n?o+n+r:"."+r)}}async match(t,e,s){let r=await this.matchCheck(t,s);r&&this.matchFinish(r,e)}matchSync(t,e,s){let r=this.matchCheckSync(t,s);r&&this.matchFinish(r,e)}walkCB(t,e,s){this.signal?.aborted&&s(),this.walkCB2(t,e,new jt(this.opts),s)}walkCB2(t,e,s,r){if(this.#u(t))return r();if(this.signal?.aborted&&r(),this.paused){this.onResume(()=>this.walkCB2(t,e,s,r));return}s.processPatterns(t,e);let n=1,o=()=>{--n===0&&r()};for(let[h,a,l]of s.matches.entries())this.#o(h)||(n++,this.match(h,a,l).then(()=>o()));for(let h of s.subwalkTargets()){if(this.maxDepth!==1/0&&h.depth()>=this.maxDepth)continue;n++;let a=h.readdirCached();h.calledReaddir()?this.walkCB3(h,a,s,o):h.readdirCB((l,c)=>this.walkCB3(h,c,s,o),!0)}o()}walkCB3(t,e,s,r){s=s.filterEntries(t,e);let n=1,o=()=>{--n===0&&r()};for(let[h,a,l]of s.matches.entries())this.#o(h)||(n++,this.match(h,a,l).then(()=>o()));for(let[h,a]of s.subwalks.entries())n++,this.walkCB2(h,a,s.child(),o);o()}walkCBSync(t,e,s){this.signal?.aborted&&s(),this.walkCB2Sync(t,e,new jt(this.opts),s)}walkCB2Sync(t,e,s,r){if(this.#u(t))return r();if(this.signal?.aborted&&r(),this.paused){this.onResume(()=>this.walkCB2Sync(t,e,s,r));return}s.processPatterns(t,e);let n=1,o=()=>{--n===0&&r()};for(let[h,a,l]of s.matches.entries())this.#o(h)||this.matchSync(h,a,l);for(let h of s.subwalkTargets()){if(this.maxDepth!==1/0&&h.depth()>=this.maxDepth)continue;n++;let a=h.readdirSync();this.walkCB3Sync(h,a,s,o)}o()}walkCB3Sync(t,e,s,r){s=s.filterEntries(t,e);let n=1,o=()=>{--n===0&&r()};for(let[h,a,l]of s.matches.entries())this.#o(h)||this.matchSync(h,a,l);for(let[h,a]of s.subwalks.entries())n++,this.walkCB2Sync(h,a,s.child(),o);o()}},xe=class extends es{matches;constructor(t,e,s){super(t,e,s),this.matches=new Set}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((t,e)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?e(this.signal.reason):t(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Oe=class extends es{results;constructor(t,e,s){super(t,e,s),this.results=new vt({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){let t=this.path;return t.isUnknown()?t.lstat().then(()=>{this.walkCB(t,this.patterns,()=>this.results.end())}):this.walkCB(t,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var Za=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",ot=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(t,e){if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=(0,cn.fileURLToPath)(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof t=="string"&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(t=t.map(a=>a.replace(/\\/g,"/"))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map(a=>a.includes("/")?a:`./**/${a}`)}if(this.pattern=t,this.platform=e.platform||Za,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,e.nocase!==void 0&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let a=e.platform==="win32"?ie:e.platform==="darwin"?be:e.platform?re:ln;this.scurry=new a(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;let s=this.platform==="darwin"||this.platform==="win32",r={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:s,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},n=this.pattern.map(a=>new H(a,r)),[o,h]=n.reduce((a,l)=>(a[0].push(...l.set),a[1].push(...l.globParts),a),[[],[]]);this.patterns=o.map((a,l)=>new Ct(a,h[l],0,this.platform))}async walk(){return[...await new xe(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new xe(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new Oe(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new Oe(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Ks=(i,t={})=>{Array.isArray(i)||(i=[i]);for(let e of i)if(new H(e,t).hasMagic())return!0;return!1};function is(i,t={}){return new ot(i,t).streamSync()}function fn(i,t={}){return new ot(i,t).stream()}function dn(i,t={}){return new ot(i,t).walkSync()}async function un(i,t={}){return new ot(i,t).walk()}function rs(i,t={}){return new ot(i,t).iterateSync()}function pn(i,t={}){return new ot(i,t).iterate()}var th=is,eh=Object.assign(fn,{sync:is}),sh=rs,ih=Object.assign(pn,{sync:rs}),rh=Object.assign(dn,{stream:is,iterate:rs}),ss=Object.assign(un,{glob:un,globSync:dn,sync:rh,globStream:fn,stream:eh,globStreamSync:is,streamSync:th,globIterate:pn,iterate:ih,globIterateSync:rs,iterateSync:sh,Glob:ot,hasMagic:Ks,escape:Kt,unescape:rt});ss.glob=ss;var Ys=i=>(delete i.devDependencies,i);var Xs=i=>(delete i.scripts,i);var It=(i,t)=>({...i,...Object.keys(t).filter(e=>e in i).reduce((e,s)=>(e[s]=t[s],e),{})});var Qs=(i,t)=>{let e={...t.dependencies,...t.devDependencies,...t.optionalDependencies,...t.peerDependencies};return i.peerDependencies&&(i.peerDependencies=It(i.peerDependencies,e)),i.optionalDependencies&&(i.optionalDependencies=It(i.optionalDependencies,e)),i};var ns=(i,t,e)=>Object.keys(i).filter(s=>e.includes(s)).reduce((s,r)=>(s[r]=t,s),{});var Zs=(i,t,e)=>(i.optionalDependencies&&(i.optionalDependencies=It(i.optionalDependencies,ns(i.optionalDependencies,t.version,e))),i);var ti=(i,t,e)=>(i.peerDependencies&&(i.peerDependencies=It(i.peerDependencies,ns(i.peerDependencies,t.version,e))),i);var ei=(i,t)=>(i.version=t.version,i);async function mn(){try{let t=Bt.getInput("root-package-path"),e=Bt.getInput("placeholder"),s=Bt.getInput("package-glob"),r=JSON.parse((await Te.readFile(t)).toString());if(!r.version)throw new Error(`${t} does not contain a "version"`);let n=Ps([Ys,Xs,ei,Qs,ti,Zs]),o=await ss(s,{ignore:"node_modules/**"});var i=await Promise.all(o.map(async a=>({path:a,package:JSON.parse((await Te.readFile(a)).toString())})));let h=i.map(a=>a.package.name);i.map(a=>({path:a.path,package:ar(n(a.package,r,h),e)})),await Promise.all(i.map(async a=>{console.log(a.path),await Te.writeFile(a.path,JSON.stringify(a.package))}))}catch(t){t instanceof Error?Bt.setFailed(t.message):Bt.setFailed("Something went wrong.")}}mn();0&&(module.exports={run});
